# Schema

> Auto-generated documentation for [env.Lib.site-packages.marshmallow.schema](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py) module.

The class `Schema` class, including its metaclass and options (class Meta).

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [Marshmallow](index.md#marshmallow) / Schema
    - [Schema](#schema)
        - [Schema().__apply_nested_option](#schema__apply_nested_option)
        - [Schema().dict_class](#schemadict_class)
        - [Schema().dump](#schemadump)
        - [Schema().dumps](#schemadumps)
        - [Schema.from_dict](#schemafrom_dict)
        - [Schema().get_attribute](#schemaget_attribute)
        - [Schema().handle_error](#schemahandle_error)
        - [Schema().load](#schemaload)
        - [Schema().loads](#schemaloads)
        - [Schema().on_bind_field](#schemaon_bind_field)
        - [Schema().set_class](#schemaset_class)
        - [Schema().validate](#schemavalidate)
    - [SchemaMeta](#schemameta)
        - [SchemaMeta.get_declared_fields](#schemametaget_declared_fields)
        - [SchemaMeta().resolve_hooks](#schemametaresolve_hooks)
    - [SchemaOpts](#schemaopts)

## Schema

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L234)

```python
class Schema(base.SchemaABC):
    def __init__(
        only: types.StrSequenceOrSet = None,
        exclude: types.StrSequenceOrSet = (),
        many: bool = False,
        context: typing.Dict = None,
        load_only: types.StrSequenceOrSet = (),
        dump_only: types.StrSequenceOrSet = (),
        partial: typing.Union[bool, types.StrSequenceOrSet] = False,
        unknown: str = None,
    ):
```

Base schema class with which to define custom schemas.

Example usage:

```python
import datetime as dt
from dataclasses import dataclass

from marshmallow import Schema, fields


@dataclass
class Album:
    title: str
    release_date: dt.date


class AlbumSchema(Schema):
    title = fields.Str()
    release_date = fields.Date()


album = Album("Beggars Banquet", dt.date(1968, 12, 6))
schema = AlbumSchema()
data = schema.dump(album)
data  # {'release_date': '1968-12-06', 'title': 'Beggars Banquet'}
```

#### Arguments

- `only` - Whitelist of the declared fields to select when
    instantiating the Schema. If None, all fields are used. Nested fields
    can be represented with dot delimiters.
- `exclude` - Blacklist of the declared fields to exclude
    when instantiating the Schema. If a field appears in both `only` and
    `exclude`, it is not used. Nested fields can be represented with dot
    delimiters.
- `many` - Should be set to `True` if ``obj`` is a collection
    so that the object will be serialized to a list.
- `context` - Optional context passed to class `fields.Method` and
    class `fields.Function` fields.
- `load_only` - Fields to skip during serialization (write-only fields)
- `dump_only` - Fields to skip during deserialization (read-only fields)
- `partial` - Whether to ignore missing fields and not require
    any fields declared. Propagates down to ``Nested`` fields as well. If
    its value is an iterable, only missing fields listed in that iterable
    will be ignored. Use dot delimiters to specify nested fields.
- `unknown` - Whether to exclude, include, or raise an error for unknown
    fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.

#### Notes

Changed in version 3.0.0
    `prefix` parameter removed.

Changed in version 2.0.0
    `__validators__`, `__preprocessors__`, and `__data_handlers__` are removed in favor of
    `marshmallow.decorators.validates_schema`,
    `marshmallow.decorators.pre_load` and `marshmallow.decorators.post_dump`.
    `__accessor__` and `__error_handler__` are deprecated. Implement the
    `handle_error` and `get_attribute` methods instead.

#### Attributes

- `error_messages` - : Overrides for default schema-level error messages: `{}`
- `opts` - These get set by SchemaMeta: `None`

### Schema().__apply_nested_option

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L926)

```python
def __apply_nested_option(option_name, field_names, set_operation) -> None:
```

Apply nested options to nested fields

### Schema().dict_class

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L411)

```python
@property
def dict_class() -> type:
```

### Schema().dump

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L528)

```python
def dump(obj: typing.Any, many: bool = None):
```

Serialize an object to native Python data types according to this
Schema's fields.

#### Arguments

- `obj` - The object to serialize.
- `many` - Whether to serialize `obj` as a collection. If `None`, the value
    for `self.many` is used.

#### Returns

A dict of serialized data
Type: *dict*

#### Notes

Added in version 1.0.0

Changed in version 3.0.0b7
    This method returns the serialized data rather than a ``(data, errors)`` duple.
    A exception `ValidationError <marshmallow.exceptions.ValidationError>` is raised
    if ``obj`` is invalid.

Changed in version 3.0.0rc9
    Validation no longer occurs upon serialization.

### Schema().dumps

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L566)

```python
def dumps(obj: typing.Any, many: bool = None, *args, **kwargs):
```

Same as :meth:[Schema().dump](#schemadump), except return a JSON-encoded string.

#### Arguments

- `obj` - The object to serialize.
- `many` - Whether to serialize `obj` as a collection. If `None`, the value
    for `self.many` is used.

#### Returns

A ``json`` string
Type: *str*

#### Notes

Added in version 1.0.0

Changed in version 3.0.0b7
    This method returns the serialized data rather than a ``(data, errors)`` duple.
    A exception `ValidationError <marshmallow.exceptions.ValidationError>` is raised
    if ``obj`` is invalid.

### Schema.from_dict

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L419)

```python
@classmethod
def from_dict(
    fields: typing.Dict[str, typing.Union[ma_fields.Field, type]],
    name: str = 'GeneratedSchema',
) -> type:
```

Generate a [Schema](#schema) class given a dictionary of fields.

```python
from marshmallow import Schema, fields

PersonSchema = Schema.from_dict({"name": fields.Str()})
print(PersonSchema().load({"name": "David"}))  # => {'name': 'David'}
```

Generated schemas are not added to the class registry and therefore cannot
be referred to by name in `Nested` fields.

#### Arguments

- `fields` *dict* - Dictionary mapping field names to field instances.
- `name` *str* - Optional name for the class, which will appear in
    the ``repr`` for the class.

#### Notes

Added in version 3.0.0

### Schema().get_attribute

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L470)

```python
def get_attribute(obj: typing.Any, attr: str, default: typing.Any):
```

Defines how to pull values from an object to serialize.

#### Notes

Added in version 2.0.0

Changed in version 3.0.0a1
    Changed position of ``obj`` and ``attr``.

### Schema().handle_error

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L453)

```python
def handle_error(
    error: ValidationError,
    data: typing.Any,
    many: bool,
    **kwargs,
):
```

Custom error handler function for the schema.

#### Arguments

- `error` - The `ValidationError` raised during (de)serialization.
- `data` - The original input data.
- `many` - Value of ``many`` on dump or load.
- `partial` - Value of ``partial`` on load.

#### Notes

Added in version 2.0.0

Changed in version 3.0.0rc9
    Receives `many` and `partial` (on deserialization) as keyword arguments.

### Schema().load

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L692)

```python
def load(
    data: typing.Union[
        typing.Mapping[str, typing.Any],
        typing.Iterable[typing.Mapping[str, typing.Any]],
    ],
    many: bool = None,
    partial: typing.Union[bool, types.StrSequenceOrSet] = None,
    unknown: str = None,
):
```

Deserialize a data structure to an object defined by this Schema's fields.

#### Arguments

- `data` - The data to deserialize.
- `many` - Whether to deserialize `data` as a collection. If `None`, the
    value for `self.many` is used.
- `partial` - Whether to ignore missing fields and not require
    any fields declared. Propagates down to ``Nested`` fields as well. If
    its value is an iterable, only missing fields listed in that iterable
    will be ignored. Use dot delimiters to specify nested fields.
- `unknown` - Whether to exclude, include, or raise an error for unknown
    fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.
    If `None`, the value for `self.unknown` is used.

#### Returns

Deserialized data

#### Notes

Added in version 1.0.0

Changed in version 3.0.0b7
    This method returns the deserialized data rather than a ``(data, errors)`` duple.
    A exception `ValidationError <marshmallow.exceptions.ValidationError>` is raised
    if invalid data are passed.

### Schema().loads

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L727)

```python
def loads(
    json_data: str,
    many: bool = None,
    partial: typing.Union[bool, types.StrSequenceOrSet] = None,
    unknown: str = None,
    **kwargs,
):
```

Same as :meth:[Schema().load](#schemaload), except it takes a JSON string as input.

#### Arguments

- `json_data` - A JSON string of the data to deserialize.
- `many` - Whether to deserialize `obj` as a collection. If `None`, the
    value for `self.many` is used.
- `partial` - Whether to ignore missing fields and not require
    any fields declared. Propagates down to ``Nested`` fields as well. If
    its value is an iterable, only missing fields listed in that iterable
    will be ignored. Use dot delimiters to specify nested fields.
- `unknown` - Whether to exclude, include, or raise an error for unknown
    fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.
    If `None`, the value for `self.unknown` is used.

#### Returns

Deserialized data

#### Notes

Added in version 1.0.0

Changed in version 3.0.0b7
    This method returns the deserialized data rather than a ``(data, errors)`` duple.
    A exception `ValidationError <marshmallow.exceptions.ValidationError>` is raised
    if invalid data are passed.

### Schema().on_bind_field

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L1020)

```python
def on_bind_field(field_name: str, field_obj: ma_fields.Field) -> None:
```

Hook to modify a field when it is bound to the [Schema](#schema).

No-op by default.

### Schema().set_class

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L415)

```python
@property
def set_class() -> type:
```

### Schema().validate

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L779)

```python
def validate(
    data: typing.Mapping,
    many: bool = None,
    partial: typing.Union[bool, types.StrSequenceOrSet] = None,
) -> typing.Dict[str, typing.List[str]]:
```

Validate `data` against the schema, returning a dictionary of
validation errors.

#### Arguments

- `data` - The data to validate.
- `many` - Whether to validate `data` as a collection. If `None`, the
    value for `self.many` is used.
- `partial` - Whether to ignore missing fields and not require
    any fields declared. Propagates down to ``Nested`` fields as well. If
    its value is an iterable, only missing fields listed in that iterable
    will be ignored. Use dot delimiters to specify nested fields.

#### Returns

A dictionary of validation errors.

#### Notes

Added in version 1.1.0

## SchemaMeta

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L87)

```python
class SchemaMeta(type):
    def __init__(name, bases, attrs):
```

Metaclass for the Schema class. Binds the declared fields to
a ``_declared_fields`` attribute, which is a dictionary mapping attribute
names to field objects. Also sets the ``opts`` class attribute, which is
the Schema class's ``class Meta`` options.

### SchemaMeta.get_declared_fields

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L129)

```python
@classmethod
def get_declared_fields(
    klass: type,
    cls_fields: typing.List,
    inherited_fields: typing.List,
    dict_cls: type,
):
```

Returns a dictionary of field_name => `Field` pairs declared on the class.
This is exposed mainly so that plugins can add additional fields, e.g. fields
computed from class Meta options.

#### Arguments

- `klass` - The class object.
- `cls_fields` - The fields declared on the class, including those added
    by the ``include`` class Meta option.
- `inherited_fields` - Inherited fields.
- `dict_class` - Either `dict` or `OrderedDict`, depending on the whether
    the user specified `ordered=True`.

### SchemaMeta().resolve_hooks

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L156)

```python
def resolve_hooks() -> typing.Dict[types.Tag, typing.List[str]]:
```

Add in the decorated processors

By doing this after constructing the class, we let standard inheritance
do all the hard work.

## SchemaOpts

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\schema.py#L196)

```python
class SchemaOpts():
    def __init__(meta, ordered: bool = False):
```

class Meta options for the :class:[Schema](#schema). Defines defaults.
