# Decorators

> Auto-generated documentation for [env.Lib.site-packages.marshmallow.decorators](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py) module.

Decorators for registering schema pre-processing and post-processing methods.
These should be imported from the top-level `marshmallow` module.

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [Marshmallow](index.md#marshmallow) / Decorators
    - [post_dump](#post_dump)
    - [post_load](#post_load)
    - [pre_dump](#pre_dump)
    - [pre_load](#pre_load)
    - [set_hook](#set_hook)
    - [validates](#validates)
    - [validates_schema](#validates_schema)

Methods decorated with
`pre_load <marshmallow.decorators.pre_load>`, `post_load <marshmallow.decorators.post_load>`,
`pre_dump <marshmallow.decorators.pre_dump>`, `post_dump <marshmallow.decorators.post_dump>`,
and `validates_schema <marshmallow.decorators.validates_schema>` receive
``many`` as a keyword argument. In addition, `pre_load <marshmallow.decorators.pre_load>`,
`post_load <marshmallow.decorators.post_load>`,
and `validates_schema <marshmallow.decorators.validates_schema>` receive
``partial``. If you don't need these arguments, add ``**kwargs`` to your method
signature.

Example: 

```python
from marshmallow import (
    Schema, pre_load, pre_dump, post_load, validates_schema,
    validates, fields, ValidationError
)

class UserSchema(Schema):

    email = fields.Str(required=True)
    age = fields.Integer(required=True)

    @post_load
    def lowerstrip_email(self, item, many, **kwargs):
        item['email'] = item['email'].lower().strip()
        return item

    @pre_load(pass_many=True)
    def remove_envelope(self, data, many, **kwargs):
        namespace = 'results' if many else 'result'
        return data[namespace]

    @post_dump(pass_many=True)
    def add_envelope(self, data, many, **kwargs):
        namespace = 'results' if many else 'result'
        return {namespace: data}

    @validates_schema
    def validate_email(self, data, **kwargs):
        if len(data['email']) < 3:
            raise ValidationError('Email must be more than 3 characters', 'email')

    @validates('age')
    def validate_age(self, data, **kwargs):
        if data < 14:
            raise ValidationError('Too young!')
```

#### Notes

These decorators only work with instance methods. Class and static
methods are not supported.

#### Warnings

The invocation order of decorated methods of the same type is not guaranteed.
If you need to guarantee order of different processing steps, you should put
them in the same processing method.

## post_dump

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L124)

```python
def post_dump(fn=None, pass_many=False, pass_original=False):
```

Register a method to invoke after serializing an object. The method
receives the serialized object and returns the processed object.

By default it receives a single object at a time, transparently handling the ``many``
argument passed to the `Schema`'s :func:`~marshmallow.Schema.dump` call.
If ``pass_many=True``, the raw data (which may be a collection) is passed.

If ``pass_original=True``, the original data (before serializing) will be passed as
an additional argument to the method.

#### Notes

Changed in version 3.0.0
    ``many`` is always passed as a keyword arguments to the decorated method.

## post_load

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L156)

```python
def post_load(fn=None, pass_many=False, pass_original=False):
```

Register a method to invoke after deserializing an object. The method
receives the deserialized data and returns the processed data.

By default it receives a single object at a time, transparently handling the ``many``
argument passed to the `Schema`'s :func:`~marshmallow.Schema.load` call.
If ``pass_many=True``, the raw data (which may be a collection) is passed.

If ``pass_original=True``, the original data (before deserializing) will be passed as
an additional argument to the method.

#### Notes

Changed in version 3.0.0
    ``partial`` and ``many`` are always passed as keyword arguments to
    the decorated method.

## pre_dump

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L110)

```python
def pre_dump(fn=None, pass_many=False):
```

Register a method to invoke before serializing an object. The method
receives the object to be serialized and returns the processed object.

By default it receives a single object at a time, transparently handling the ``many``
argument passed to the `Schema`'s :func:`~marshmallow.Schema.dump` call.
If ``pass_many=True``, the raw data (which may be a collection) is passed.

#### Notes

Changed in version 3.0.0
    ``many`` is always passed as a keyword arguments to the decorated method.

## pre_load

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L141)

```python
def pre_load(fn=None, pass_many=False):
```

Register a method to invoke before deserializing an object. The method
receives the data to be deserialized and returns the processed data.

By default it receives a single object at a time, transparently handling the ``many``
argument passed to the `Schema`'s :func:`~marshmallow.Schema.load` call.
If ``pass_many=True``, the raw data (which may be a collection) is passed.

#### Notes

Changed in version 3.0.0
    ``partial`` and ``many`` are always passed as keyword arguments to
    the decorated method.

## set_hook

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L174)

```python
def set_hook(fn, key, **kwargs):
```

Mark decorated function as a hook to be picked up later.
You should not need to use this method directly.

#### Notes

Currently only works with functions and instance methods. Class and
static methods are not supported.

#### Returns

Decorated function if supplied, else this decorator with its args
    bound.

## validates

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L72)

```python
def validates(field_name: str):
```

Register a field validator.

#### Arguments

- `field_name` *str* - Name of the field that the method validates.

## validates_schema

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\marshmallow\decorators.py#L80)

```python
def validates_schema(
    fn=None,
    pass_many=False,
    pass_original=False,
    skip_on_field_errors=True,
):
```

Register a schema-level validator.

By default it receives a single object at a time, transparently handling the ``many``
argument passed to the `Schema`'s :func:`~marshmallow.Schema.validate` call.
If ``pass_many=True``, the raw data (which may be a collection) is passed.

If ``pass_original=True``, the original data (before unmarshalling) will be passed as
an additional argument to the method.

If ``skip_on_field_errors=True``, this validation method will be skipped whenever
validation errors have been detected when validating fields.

#### Notes

Changed in version 3.0.0b1
    ``skip_on_field_errors`` defaults to `True`.

Changed in version 3.0.0
    ``partial`` and ``many`` are always passed as keyword arguments to
    the decorated method.
