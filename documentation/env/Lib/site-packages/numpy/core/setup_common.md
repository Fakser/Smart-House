# Setup Common

> Auto-generated documentation for [env.Lib.site-packages.numpy.core.setup_common](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py) module.

- [Smart-house-rest-api](..\..\..\..\..\README.md#description) / [Modules](..\..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [Numpy](..\index.md#numpy) / [Core](index.md#core) / Setup Common
    - [MismatchCAPIWarning](#mismatchcapiwarning)
    - [check_api_version](#check_api_version)
    - [check_for_right_shift_internal_compiler_error](#check_for_right_shift_internal_compiler_error)
    - [check_long_double_representation](#check_long_double_representation)
    - [fname2def](#fname2def)
    - [get_api_versions](#get_api_versions)
    - [is_released](#is_released)
    - [long_double_representation](#long_double_representation)
    - [pyod](#pyod)
    - [sym2def](#sym2def)
    - [type2def](#type2def)

#### Attributes

- `C_ABI_VERSION` - Binary compatibility version number. This number is increased whenever the
  C-API is changed such that binary compatibility is broken, i.e. whenever a
  recompile of extension modules is needed.: `16777225`
- `C_API_VERSION` - Minor API version.  This number is increased whenever a change is made to the
  C-API -- whether it breaks binary compatibility or not.  Some changes, such
  as adding a function pointer to the end of the function table, can be made
  without breaking binary compatibility.  In this case, only the C_API_VERSION
  (*not* C_ABI_VERSION) would be increased.  Whenever binary compatibility is
  broken, both C_API_VERSION and C_ABI_VERSION should be increased.
  
  0x00000008 - 1.7.x
  0x00000009 - 1.8.x
  0x00000009 - 1.9.x
  0x0000000a - 1.10.x
  0x0000000a - 1.11.x
  0x0000000a - 1.12.x
  0x0000000b - 1.13.x
  0x0000000c - 1.14.x
  0x0000000c - 1.15.x
  0x0000000d - 1.16.x: `13`
- `MANDATORY_FUNCS` - Mandatory functions: if not found, fail the build: `['sin', 'cos', 'tan', 'sinh', 'cosh', 'tanh', '...`
- `OPTIONAL_STDFUNCS` - Standard functions which may not be available and for which we have a
  replacement implementation. Note that some of these are C99 functions.: `['expm1', 'log1p', 'acosh', 'asinh', 'atanh', '...`
- `OPTIONAL_INTRINSICS` - optional gcc compiler builtins and their call arguments and optional a
  required header and definition name (HAVE_ prepended)
  call arguments are required as the compiler will do strict signature checking: `[('__builtin_isnan', '5.'), ('__builtin_isinf',...`
- `OPTIONAL_FUNCTION_ATTRIBUTES` - function attributes
  tested via "int %s %s(void *);" % (attribute, name)
  function name will be converted to HAVE_<upper-case-name> preprocessor macro: `[('__attribute__((optimize("unroll-loops")))', ...`
- `OPTIONAL_FUNCTION_ATTRIBUTES_WITH_INTRINSICS` - function attributes with intrinsics
  To ensure your compiler can compile avx intrinsics with just the attributes
  gcc 4.8.4 support attributes but not with intrisics
  tested via "#include<%s> int %s %s(void *){code; return 0;};" % (header, attribute, name, code)
  function name will be converted to HAVE_<upper-case-name> preprocessor macro: `[('__attribute__((target("avx2,fma")))', 'attri...`
- `OPTIONAL_VARIABLE_ATTRIBUTES` - variable attributes tested via "int %s a" % attribute: `['__thread', '__declspec(thread)']`
- `OPTIONAL_STDFUNCS_MAYBE` - Subset of OPTIONAL_STDFUNCS which may already have HAVE_* defined by Python.h: `['expm1', 'log1p', 'acosh', 'atanh', 'asinh', '...`
- `C99_FUNCS` - C99 functions: float and long double versions: `['sin', 'cos', 'tan', 'sinh', 'cosh', 'tanh', '...`

## MismatchCAPIWarning

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L45)

```python
class MismatchCAPIWarning(Warning):
```

## check_api_version

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L81)

```python
def check_api_version(apiversion, codegen_dir):
```

Emits a MismatchCAPIWarning if the C API version needs updating.

## check_for_right_shift_internal_compiler_error

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L397)

```python
def check_for_right_shift_internal_compiler_error(cmd):
```

On our arm CI, this fails with an internal compilation error

The failure looks like the following, and can be reproduced on ARM64 GCC 5.4:

<source>: In function 'right_shift':
<source>:4:20: internal compiler error: in expand_shift_1, at expmed.c:2349
       ip1[i] = ip1[i] >> in2;
              ^
Please submit a full bug report,
with preprocessed source if appropriate.
See <http://gcc.gnu.org/bugs.html> for instructions.
Compiler returned: 1

This function returns True if this compiler bug is present, and we need to
turn off optimization for the function

## check_long_double_representation

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L225)

```python
def check_long_double_representation(cmd):
```

## fname2def

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L213)

```python
def fname2def(name):
```

## get_api_versions

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L60)

```python
def get_api_versions(apiversion, codegen_dir):
```

Return current C API checksum and the recorded checksum.

Return current C API checksum and the recorded checksum for the given
version of the C API version.

## is_released

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L48)

```python
def is_released(config):
```

Return True if a released version of numpy is detected.

## long_double_representation

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L338)

```python
def long_double_representation(lines):
```

Given a binary dump as given by GNU od -b, look for long double
representation.

## pyod

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L290)

```python
def pyod(filename):
```

Python implementation of the od UNIX utility (od -b, more exactly).

Parameters
----------
filename : str
    name of the file to get the dump from.

Returns
-------
out : seq
    list of lines of od output

Note
----
We only implement enough to get the necessary information for long double
representation, this is not intended as a compatible replacement for od.

## sym2def

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L216)

```python
def sym2def(symbol):
```

## type2def

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\numpy\core\setup_common.py#L220)

```python
def type2def(symbol):
```
