# Runtime

> Auto-generated documentation for [env.Lib.site-packages.jinja2.runtime](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py) module.

The runtime functions and state used by compiled templates.

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [Jinja2](index.md#jinja2) / Runtime
    - [BlockReference](#blockreference)
        - [BlockReference().super](#blockreferencesuper)
    - [ChainableUndefined](#chainableundefined)
    - [Context](#context)
        - [Context().\_\_getitem\_\_](#context__getitem__)
        - [Context().call](#contextcall)
        - [Context().derived](#contextderived)
        - [Context().get](#contextget)
        - [Context().get_all](#contextget_all)
        - [Context().get_exported](#contextget_exported)
        - [Context().resolve](#contextresolve)
        - [Context().resolve_or_missing](#contextresolve_or_missing)
        - [Context().super](#contextsuper)
    - [ContextMeta](#contextmeta)
    - [DebugUndefined](#debugundefined)
    - [LoopContext](#loopcontext)
        - [LoopContext().\_\_call\_\_](#loopcontext__call__)
        - [LoopContext().changed](#loopcontextchanged)
        - [LoopContext().cycle](#loopcontextcycle)
        - [LoopContext().depth](#loopcontextdepth)
        - [LoopContext().first](#loopcontextfirst)
        - [LoopContext().index](#loopcontextindex)
        - [LoopContext().last](#loopcontextlast)
        - [LoopContext().length](#loopcontextlength)
        - [LoopContext().nextitem](#loopcontextnextitem)
        - [LoopContext().previtem](#loopcontextprevitem)
        - [LoopContext().revindex](#loopcontextrevindex)
        - [LoopContext().revindex0](#loopcontextrevindex0)
    - [Macro](#macro)
    - [StrictUndefined](#strictundefined)
    - [TemplateReference](#templatereference)
    - [Undefined](#undefined)
    - [identity](#identity)
    - [make_logging_undefined](#make_logging_undefined)
    - [markup_join](#markup_join)
    - [new_context](#new_context)
    - [resolve_or_missing](#resolve_or_missing)
    - [unicode_join](#unicode_join)

#### Attributes

- `exported` - these variables are exported to the template runtime: `['LoopContext', 'TemplateReference', 'Macro', '...`
- `to_string` - : the name of the function that is used to convert something into
  : a string.  We can just use the text type here.: `text_type`

## BlockReference

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L352)

```python
class BlockReference(object):
    def __init__(name, context, stack, depth):
```

One block on a template reference.

### BlockReference().super

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L361)

```python
@property
def super():
```

Super the block.

## ChainableUndefined

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L918)

```python
class ChainableUndefined(Undefined):
```

An undefined that is chainable, where both ``__getattr__`` and
``__getitem__`` return itself rather than raising an
exception `UndefinedError`.

```python
>>> foo = ChainableUndefined(name='foo')
>>> str(foo.bar['baz'])
''
>>> foo.bar['baz'] + 42
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined
```

#### Notes

Added in version 2.11.0

#### See also

- [Undefined](#undefined)

## Context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L158)

```python
class Context(with_metaclass(ContextMeta)):
    def __init__(environment, parent, name, blocks):
```

The template context holds the variables of a template.  It stores the
values passed to the template and also the names the template exports.
Creating instances is neither supported nor useful as it's created
automatically at various stages of the template evaluation and should not
be created by hand.

The context is immutable.  Modifications on attribute `parent` **must not**
happen and modifications on attribute `vars` are allowed from generated
template code only.  Template filters and global functions marked as
:func:`contextfunction`\s get the active context passed as first argument
and are allowed to access the context read-only.

The template context supports read only dict operations (`get`,
`keys`, `values`, `items`, `iterkeys`, `itervalues`, `iteritems`,
`__getitem__`, `__contains__`).  Additionally there is a :meth:`resolve`
method that doesn't fail with a `KeyError` but returns an
:class:[Undefined](#undefined) object for missing variables.

### Context().\_\_getitem\_\_

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L332)

```python
def __getitem__(key):
```

Lookup a variable or raise `KeyError` if the variable is
undefined.

### Context().call

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L260)

```python
@internalcode
def call(__obj, *args, **kwargs):
```

Call the callable with the arguments and keyword arguments
provided but inject the active context or environment as first
argument if the callable is a :func:`contextfunction` or
:func:`environmentfunction`.

### Context().derived

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L298)

```python
def derived(locals=None):
```

Internal helper function to create a derived context.  This is
used in situations where the system needs a new context in the same
template that is independent.

### Context().get

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L213)

```python
def get(key, default=None):
```

Returns an item from the template context, if it doesn't exist
`default` is returned.

### Context().get_all

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L249)

```python
def get_all():
```

Return the complete context as dict including the exported
variables.  For optimizations reasons this might not return an
actual copy so be careful with using it.

### Context().get_exported

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L245)

```python
def get_exported():
```

Get a new dict with the exported variables.

### Context().resolve

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L222)

```python
def resolve(key):
```

Looks up a variable like `__getitem__` or [Context().get](#contextget) but returns an
:class:[Undefined](#undefined) object with the name of the name looked up.

### Context().resolve_or_missing

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L234)

```python
def resolve_or_missing(key):
```

Resolves a variable like :meth:[Context().resolve](#contextresolve) but returns the
special `missing` value if it cannot be found.

### Context().super

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L201)

```python
def super(name, current):
```

Render a parent block.

## ContextMeta

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L123)

```python
class ContextMeta(type):
```

## DebugUndefined

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L945)

```python
implements_to_string
class DebugUndefined(Undefined):
```

An undefined that returns the debug info when printed.

```python
>>> foo = DebugUndefined(name='foo')
>>> str(foo)
'{{ foo }}'
>>> not foo
True
>>> foo + 42
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined

#### See also

- [Undefined](#undefined)

## LoopContext

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L378)

```python
implements_iterator
class LoopContext():
    def __init__(iterable, undefined, recurse=None, depth0=0):
```

A wrapper iterable for dynamic ``for`` loops, with information
about the loop and iteration.

#### Attributes

- `index0` - : Current iteration of the loop, starting at 0.: `-1`

### LoopContext().\_\_call\_\_

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L552)

```python
@internalcode
def __call__(iterable):
```

When iterating over nested data, render the body of the loop
recursively with the given inner iterable data.

The loop must have the ``recursive`` marker for this to work.

### LoopContext().changed

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L525)

```python
def changed(*value):
```

Return ``True`` if previously called with a different value
(including when called for the first time).

#### Arguments

- `value` - One or more values to compare to the last call.

### LoopContext().cycle

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L514)

```python
def cycle(*args):
```

Return a value from the given args, cycling through based on
the current :attr:[index0](#loopcontext).

#### Arguments

- `args` - One or more values to cycle through.

### LoopContext().depth

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L435)

```python
@property
def depth():
```

How many levels deep a recursive loop currently is, starting at 1.

### LoopContext().first

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L461)

```python
@property
def first():
```

Whether this is the first iteration of the loop.

### LoopContext().index

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L440)

```python
@property
def index():
```

Current iteration of the loop, starting at 1.

### LoopContext().last

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L478)

```python
@property
def last():
```

Whether this is the last iteration of the loop.

Causes the iterable to advance early. See
:func:`itertools.groupby` for issues this can cause.
The :func:`groupby` filter avoids that issue.

### LoopContext().length

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L413)

```python
@property
def length():
```

Length of the iterable.

If the iterable is a generator or otherwise does not have a
size, it is eagerly evaluated to get a size.

### LoopContext().nextitem

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L498)

```python
@property
def nextitem():
```

The item in the next iteration. Undefined during the last
iteration.

Causes the iterable to advance early. See
:func:`itertools.groupby` for issues this can cause.
The :func:`groupby` filter avoids that issue.

### LoopContext().previtem

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L488)

```python
@property
def previtem():
```

The item in the previous iteration. Undefined during the
first iteration.

### LoopContext().revindex

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L453)

```python
@property
def revindex():
```

Number of iterations from the end of the loop, ending at 1.

Requires calculating :attr:[LoopContext().length](#loopcontextlength).

### LoopContext().revindex0

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L445)

```python
@property
def revindex0():
```

Number of iterations from the end of the loop, ending at 0.

Requires calculating :attr:[LoopContext().length](#loopcontextlength).

## Macro

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L570)

```python
class Macro(object):
    def __init__(
        environment,
        func,
        name,
        arguments,
        catch_kwargs,
        catch_varargs,
        caller,
        default_autoescape=None,
    ):
```

Wraps a macro function.

## StrictUndefined

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L973)

```python
implements_to_string
class StrictUndefined(Undefined):
```

An undefined that barks on print and iteration as well as boolean
tests and all kinds of comparisons.  In other words: you can do nothing
with it except checking if it's defined using the `defined` test.

```python
>>> foo = StrictUndefined(name='foo')
>>> str(foo)
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined
>>> not foo
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined
>>> foo + 42
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined

#### See also

- [Undefined](#undefined)

## TemplateReference

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L105)

```python
class TemplateReference(object):
    def __init__(context):
```

The `self` in templates.

## Undefined

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L691)

```python
implements_to_string
class Undefined(object):
    def __init__(hint=None, obj=missing, name=None, exc=UndefinedError):
```

The default undefined type.  This undefined type can be printed and
iterated over, but every other access will raise an exception `UndefinedError`:

```python
>>> foo = Undefined(name='foo')
>>> str(foo)
''
>>> not foo
True
>>> foo + 42
Traceback (most recent call last):
  ...
jinja2.exceptions.UndefinedError: 'foo' is undefined

## identity

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L55)

```python
def identity(x):
```

Returns its argument. Useful for certain things in the
environment.

## make_logging_undefined

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L829)

```python
def make_logging_undefined(logger=None, base=None):
```

Given a logger object this returns a new undefined class that will
log certain failures.  It will log iterations and printing.  If no
logger is given a default logger is created.

Example

```python
logger = logging.getLogger(__name__)
LoggingUndefined = make_logging_undefined(
    logger=logger,
    base=Undefined
)
```

#### Notes

Added in version 2.8

#### Arguments

- `logger` - the logger to use.  If not provided, a default logger
               is created.
- `base` - the base class to add logging functionality to.  This
             defaults to :class:[Undefined](#undefined).

## markup_join

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L62)

```python
def markup_join(seq):
```

Concatenation that escapes if necessary and converts to unicode.

## new_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L78)

```python
def new_context(
    environment,
    template_name,
    blocks,
    vars=None,
    shared=None,
    globals=None,
    locals=None,
):
```

Internal helper for context creation.

## resolve_or_missing

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L150)

```python
def resolve_or_missing(context, key, missing=missing):
```

## unicode_join

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\jinja2\runtime.py#L73)

```python
def unicode_join(seq):
```

Simple args to unicode conversion and concatenation.
