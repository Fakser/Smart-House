# Tagged JSON

> Auto-generated documentation for [env.Lib.site-packages.flask.json.tag](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py) module.

A compact representation for lossless serialization of non-standard JSON types.
class `flask.sessions.SecureCookieSessionInterface` uses this to serialize
the session data, but it may be useful in other places. It can be extended to
support other types.

- [Smart-house-rest-api](..\..\..\..\..\README.md#description) / [Modules](..\..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [flask](..\index.md#flask) / [flask.json](index.md#flaskjson) / Tagged JSON
    - [JSONTag](#jsontag)
        - [JSONTag().check](#jsontagcheck)
        - [JSONTag().tag](#jsontagtag)
        - [JSONTag().to_json](#jsontagto_json)
        - [JSONTag().to_python](#jsontagto_python)
    - [PassDict](#passdict)
        - [PassDict().check](#passdictcheck)
        - [PassDict().to_json](#passdictto_json)
    - [PassList](#passlist)
        - [PassList().check](#passlistcheck)
        - [PassList().to_json](#passlistto_json)
    - [TagBytes](#tagbytes)
        - [TagBytes().check](#tagbytescheck)
        - [TagBytes().to_json](#tagbytesto_json)
        - [TagBytes().to_python](#tagbytesto_python)
    - [TagDateTime](#tagdatetime)
        - [TagDateTime().check](#tagdatetimecheck)
        - [TagDateTime().to_json](#tagdatetimeto_json)
        - [TagDateTime().to_python](#tagdatetimeto_python)
    - [TagDict](#tagdict)
        - [TagDict().check](#tagdictcheck)
        - [TagDict().to_json](#tagdictto_json)
        - [TagDict().to_python](#tagdictto_python)
    - [TagMarkup](#tagmarkup)
        - [TagMarkup().check](#tagmarkupcheck)
        - [TagMarkup().to_json](#tagmarkupto_json)
        - [TagMarkup().to_python](#tagmarkupto_python)
    - [TagTuple](#tagtuple)
        - [TagTuple().check](#tagtuplecheck)
        - [TagTuple().to_json](#tagtupleto_json)
        - [TagTuple().to_python](#tagtupleto_python)
    - [TagUUID](#taguuid)
        - [TagUUID().check](#taguuidcheck)
        - [TagUUID().to_json](#taguuidto_json)
        - [TagUUID().to_python](#taguuidto_python)
    - [TaggedJSONSerializer](#taggedjsonserializer)
        - [TaggedJSONSerializer().dumps](#taggedjsonserializerdumps)
        - [TaggedJSONSerializer().loads](#taggedjsonserializerloads)
        - [TaggedJSONSerializer().register](#taggedjsonserializerregister)
        - [TaggedJSONSerializer().tag](#taggedjsonserializertag)
        - [TaggedJSONSerializer().untag](#taggedjsonserializeruntag)

TaggedJSONSerializer
    :members:

JSONTag
    :members:

Let's seen an example that adds support for class `collections.OrderedDict`.
Dicts don't have an order in Python or JSON, so to handle this we will dump
the items as a list of ``[key, value]`` pairs. Subclass class `JSONTag` and
give it the new key ``' od'`` to identify the type. The session serializer
processes dicts first, so insert the new tag at the front of the order since
``OrderedDict`` must be processed before ``dict``. 

```python
from flask.json.tag import JSONTag

class TagOrderedDict(JSONTag):
    __slots__ = ('serializer',)
    key = ' od'

    def check(self, value):
        return isinstance(value, OrderedDict)

    def to_json(self, value):
        return [[k, self.serializer.tag(v)] for k, v in iteritems(value)]

    def to_python(self, value):
        return OrderedDict(value)

app.session_interface.serializer.register(TagOrderedDict, index=0)
```

:copyright: 2010 Pallets
:license: BSD-3-Clause

## JSONTag

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L59)

```python
class JSONTag(object):
    def __init__(serializer):
```

Base class for defining type tags for :class:[TaggedJSONSerializer](#taggedjsonserializer).

#### Attributes

- `key` - : The tag to mark the serialized object with. If ``None``, this tag is
  : only used as an intermediate step during tagging.: `None`

### JSONTag().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L72)

```python
def check(value):
```

Check if the given value should be tagged by this tag.

### JSONTag().tag

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L86)

```python
def tag(value):
```

Convert the value to a valid JSON type and add the tag structure
around it.

### JSONTag().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L76)

```python
def to_json(value):
```

Convert the Python object to an object that is a valid JSON type.
The tag will be added later.

### JSONTag().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L81)

```python
def to_python(value):
```

Convert the JSON representation back to the correct type. The tag
will already be removed.

## PassDict

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L118)

```python
class PassDict(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### PassDict().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L121)

```python
def check(value):
```

### PassDict().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L124)

```python
def to_json(value):
```

## PassList

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L146)

```python
class PassList(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### PassList().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L149)

```python
def check(value):
```

### PassList().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L152)

```python
def to_json(value):
```

## TagBytes

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L158)

```python
class TagBytes(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### TagBytes().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L162)

```python
def check(value):
```

### TagBytes().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L165)

```python
def to_json(value):
```

### TagBytes().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L168)

```python
def to_python(value):
```

## TagDateTime

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L204)

```python
class TagDateTime(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### TagDateTime().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L208)

```python
def check(value):
```

### TagDateTime().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L211)

```python
def to_json(value):
```

### TagDateTime().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L214)

```python
def to_python(value):
```

## TagDict

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L92)

```python
class TagDict(JSONTag):
```

Tag for 1-item dicts whose only key matches a registered tag.

Internally, the dict key is suffixed with `__`, and the suffix is removed
when deserializing.

#### See also

- [JSONTag](#jsontag)

### TagDict().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L102)

```python
def check(value):
```

### TagDict().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L109)

```python
def to_json(value):
```

### TagDict().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L113)

```python
def to_python(value):
```

## TagMarkup

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L172)

```python
class TagMarkup(JSONTag):
```

Serialize anything matching the class `flask.Markup` API by
having a ``__html__`` method to the result of that method. Always
deserializes to an instance of class `flask.Markup`.

#### See also

- [JSONTag](#jsontag)

### TagMarkup().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L180)

```python
def check(value):
```

### TagMarkup().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L183)

```python
def to_json(value):
```

### TagMarkup().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L186)

```python
def to_python(value):
```

## TagTuple

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L132)

```python
class TagTuple(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### TagTuple().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L136)

```python
def check(value):
```

### TagTuple().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L139)

```python
def to_json(value):
```

### TagTuple().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L142)

```python
def to_python(value):
```

## TagUUID

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L190)

```python
class TagUUID(JSONTag):
```

#### See also

- [JSONTag](#jsontag)

### TagUUID().check

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L194)

```python
def check(value):
```

### TagUUID().to_json

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L197)

```python
def to_json(value):
```

### TagUUID().to_python

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L200)

```python
def to_python(value):
```

## TaggedJSONSerializer

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L218)

```python
class TaggedJSONSerializer(object):
    def __init__():
```

Serializer that uses a tag system to compactly represent objects that
are not JSON types. Passed as the intermediate serializer to
class `itsdangerous.Serializer`.

The following extra types are supported:

* class `dict`
* class `tuple`
* class `bytes`
* class `flask.Markup`
* class `uuid.UUID`
* class `datetime.datetime`

#### Attributes

- `default_tags` - : Tag classes to bind when creating the serializer. Other tags can be
  : added later using :meth:`~register`.: `[TagDict, PassDict, TagTuple, PassList, TagByte...`

### TaggedJSONSerializer().dumps

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L303)

```python
def dumps(value):
```

Tag the value and dump it to a compact JSON string.

### TaggedJSONSerializer().loads

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L307)

```python
def loads(value):
```

Load data from a JSON string and deserialized any tagged objects.

### TaggedJSONSerializer().register

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L255)

```python
def register(tag_class, force=False, index=None):
```

Register a new tag with this serializer.

#### Arguments

- `tag_class` - tag class to register. Will be instantiated with this
    serializer instance.
- `force` - overwrite an existing tag. If false (default), a
    exception `KeyError` is raised.
- `index` - index to insert the new tag in the tag order. Useful when
    the new tag is a special case of an existing tag. If ``None``
    (default), the tag is appended to the end of the order.

#### Raises

- `KeyError` -  if the tag key is already registered and ``force`` is
    not true.

### TaggedJSONSerializer().tag

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L283)

```python
def tag(value):
```

Convert a value to a tagged representation if necessary.

### TaggedJSONSerializer().untag

[[find in source code]](..\..\..\..\..\..\env\Lib\site-packages\flask\json\tag.py#L291)

```python
def untag(value):
```

Convert a tagged representation back to the original type.
