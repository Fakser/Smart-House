# flask.app

> Auto-generated documentation for [env.Lib.site-packages.flask.app](..\..\..\..\..\env\Lib\site-packages\flask\app.py) module.

This module implements the central WSGI application object.

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [flask](index.md#flask) / flask.app
    - [Flask](#flask)
        - [Flask().\_\_call\_\_](#flask__call__)
        - [Flask().add_template_filter](#flaskadd_template_filter)
        - [Flask().add_template_global](#flaskadd_template_global)
        - [Flask().add_template_test](#flaskadd_template_test)
        - [Flask().add_url_rule](#flaskadd_url_rule)
        - [Flask().after_request](#flaskafter_request)
        - [Flask().app_context](#flaskapp_context)
        - [Flask().auto_find_instance_path](#flaskauto_find_instance_path)
        - [Flask().before_first_request](#flaskbefore_first_request)
        - [Flask().before_request](#flaskbefore_request)
        - [Flask().context_processor](#flaskcontext_processor)
        - [Flask().create_global_jinja_loader](#flaskcreate_global_jinja_loader)
        - [Flask().create_jinja_environment](#flaskcreate_jinja_environment)
        - [Flask().create_url_adapter](#flaskcreate_url_adapter)
        - [Flask().debug](#flaskdebug)
        - [Flask().debug](#flaskdebug)
        - [Flask().dispatch_request](#flaskdispatch_request)
        - [Flask().do_teardown_appcontext](#flaskdo_teardown_appcontext)
        - [Flask().do_teardown_request](#flaskdo_teardown_request)
        - [Flask().endpoint](#flaskendpoint)
        - [Flask().errorhandler](#flaskerrorhandler)
        - [Flask().finalize_request](#flaskfinalize_request)
        - [Flask().full_dispatch_request](#flaskfull_dispatch_request)
        - [Flask().got_first_request](#flaskgot_first_request)
        - [Flask().handle_exception](#flaskhandle_exception)
        - [Flask().handle_http_exception](#flaskhandle_http_exception)
        - [Flask().handle_url_build_error](#flaskhandle_url_build_error)
        - [Flask().handle_user_exception](#flaskhandle_user_exception)
        - [Flask().inject_url_defaults](#flaskinject_url_defaults)
        - [Flask().iter_blueprints](#flaskiter_blueprints)
        - [Flask().jinja_env](#flaskjinja_env)
        - [Flask().log_exception](#flasklog_exception)
        - [Flask().logger](#flasklogger)
        - [Flask().make_config](#flaskmake_config)
        - [Flask().make_default_options_response](#flaskmake_default_options_response)
        - [Flask().make_null_session](#flaskmake_null_session)
        - [Flask().make_response](#flaskmake_response)
        - [Flask().make_shell_context](#flaskmake_shell_context)
        - [Flask().name](#flaskname)
        - [Flask().open_instance_resource](#flaskopen_instance_resource)
        - [Flask().open_session](#flaskopen_session)
        - [Flask().preprocess_request](#flaskpreprocess_request)
        - [Flask().preserve_context_on_exception](#flaskpreserve_context_on_exception)
        - [Flask().process_response](#flaskprocess_response)
        - [Flask().propagate_exceptions](#flaskpropagate_exceptions)
        - [Flask().raise_routing_exception](#flaskraise_routing_exception)
        - [Flask().register_blueprint](#flaskregister_blueprint)
        - [Flask().register_error_handler](#flaskregister_error_handler)
        - [Flask().request_context](#flaskrequest_context)
        - [Flask().route](#flaskroute)
        - [Flask().run](#flaskrun)
        - [Flask().save_session](#flasksave_session)
        - [Flask().select_jinja_autoescape](#flaskselect_jinja_autoescape)
        - [Flask().shell_context_processor](#flaskshell_context_processor)
        - [Flask().should_ignore_error](#flaskshould_ignore_error)
        - [Flask().teardown_appcontext](#flaskteardown_appcontext)
        - [Flask().teardown_request](#flaskteardown_request)
        - [Flask().template_filter](#flasktemplate_filter)
        - [Flask().template_global](#flasktemplate_global)
        - [Flask().template_test](#flasktemplate_test)
        - [Flask().templates_auto_reload](#flasktemplates_auto_reload)
        - [Flask().templates_auto_reload](#flasktemplates_auto_reload)
        - [Flask().test_cli_runner](#flasktest_cli_runner)
        - [Flask().test_client](#flasktest_client)
        - [Flask().test_request_context](#flasktest_request_context)
        - [Flask().trap_http_exception](#flasktrap_http_exception)
        - [Flask().try_trigger_before_first_request_functions](#flasktry_trigger_before_first_request_functions)
        - [Flask().update_template_context](#flaskupdate_template_context)
        - [Flask().url_defaults](#flaskurl_defaults)
        - [Flask().url_value_preprocessor](#flaskurl_value_preprocessor)
        - [Flask().wsgi_app](#flaskwsgi_app)
    - [setupmethod](#setupmethod)

:copyright: 2010 Pallets
:license: BSD-3-Clause

## Flask

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L103)

```python
class Flask(_PackageBoundObject):
    def __init__(
        import_name,
        static_url_path=None,
        static_folder='static',
        static_host=None,
        host_matching=False,
        subdomain_matching=False,
        template_folder='templates',
        instance_path=None,
        instance_relative_config=False,
        root_path=None,
    ):
```

The flask object implements a WSGI application and acts as the central
object.  It is passed the name of the module or package of the
application.  Once it is created it will act as a central registry for
the view functions, the URL rules, template configuration and much more.

The name of the package is used to resolve resources from inside the
package or the folder the module is contained in depending on if the
package parameter resolves to an actual python package (a folder with
an :file:`__init__.py` file inside) or a standard module (just a ``.py`` file).

For more information about resource loading, see :func:`open_resource`.

Usually you create a :class:[Flask](#flask) instance in your main module or
in the :file:`__init__.py` file of your package like this

```python
from flask import Flask
app = Flask(__name__)
```

About the First Parameter

The idea of the first parameter is to give Flask an idea of what
belongs to your application.  This name is used to find resources
on the filesystem, can be used by extensions to improve debugging
information and a lot more.

So it's important what you provide there.  If you are using a single
module, `__name__` is always the correct value.  If you however are
using a package, it's usually recommended to hardcode the name of
your package there.

For example if your application is defined in :file:`yourapplication/app.py`
you should create it with one of the two versions below

```python
app = Flask('yourapplication')
app = Flask(__name__.split('.')[0])
```

Why is that?  The application will work even with `__name__`, thanks
to how resources are looked up.  However it will make debugging more
painful.  Certain extensions can make assumptions based on the
import name of your application.  For example the Flask-SQLAlchemy
extension will look for the code in your application that triggered
an SQL query in debug mode.  If the import name is not properly set
up, that debugging information is lost.  (For example it would only
pick up SQL queries in `yourapplication.app` and not
`yourapplication.views.frontend`)

#### Notes

Added in version 0.7
   The `static_url_path`, `static_folder`, and `template_folder`
   parameters were added.

Added in version 0.8
   The `instance_path` and `instance_relative_config` parameters were
   added.

Added in version 0.11
   The `root_path` parameter was added.

Added in version 1.0
   The ``host_matching`` and ``static_host`` parameters were added.

Added in version 1.0
   The ``subdomain_matching`` parameter was added. Subdomain
   matching needs to be enabled manually now. Setting
   `SERVER_NAME` does not implicitly enable it.

#### Arguments

- `import_name` - the name of the application package
- `static_url_path` - can be used to specify a different path for the
                        static files on the web.  Defaults to the name
                        of the `static_folder` folder.
- `static_folder` - The folder with static files that is served at
    ``static_url_path``. Relative to the application ``root_path``
    or an absolute path. Defaults to ``'static'``.
- `static_host` - the host to use when adding the static route.
    Defaults to None. Required when using ``host_matching=True``
    with a ``static_folder`` configured.
- `host_matching` - set ``url_map.host_matching`` attribute.
    Defaults to False.
- `subdomain_matching` - consider the subdomain relative to
    `SERVER_NAME` when matching routes. Defaults to False.
- `template_folder` - the folder that contains the templates that should
                        be used by the application.  Defaults to
                        ``'templates'`` folder in the root path of the
                        application.
- `instance_path` - An alternative instance path for the application.
                      By default the folder ``'instance'`` next to the
                      package or module is assumed to be the instance
                      path.
- `instance_relative_config` - if set to ``True`` relative filenames
                                 for loading the config are assumed to
                                 be relative to the instance path instead
                                 of the application root.
- `root_path` - Flask by default will automatically calculate the path
                  to the root of the application.  In certain situations
                  this cannot be achieved (for instance if the package
                  is a Python 3 namespace package) and needs to be
                  manually defined.

#### Attributes

- `request_class` - : The class that is used for request objects.  See :class:`~flask.Request`
  : for more information.: `Request`
- `response_class` - : The class that is used for response objects.  See
  : :class:`~flask.Response` for more information.: `Response`
- `jinja_environment` - : The class that is used for the Jinja environment.
  :
  : .. versionadded:: 0.11: `Environment`
- `app_ctx_globals_class` - : The class that is used for the :data:`~flask.g` instance.
  :
  : Example use cases for a custom class:
  :
  : 1. Store arbitrary attributes on flask.g.
  : 2. Add a property for lazy per-request database connectors.
  : 3. Return None instead of AttributeError on unexpected attributes.
  : 4. Raise exception if an unexpected attr is set, a "controlled" flask.g.
  :
  : In Flask 0.9 this property was called `request_globals_class` but it
  : was changed in 0.10 to :attr:`app_ctx_globals_class` because the
  : flask.g object is now application context scoped.
  :
  : .. versionadded:: 0.10: `_AppCtxGlobals`
- `config_class` - : The class that is used for the ``config`` attribute of this app.
  : Defaults to :class:`~flask.Config`.
  :
  : Example use cases for a custom class:
  :
  : 1. Default values for certain config options.
  : 2. Access to config values through attributes in addition to keys.
  :
  : .. versionadded:: 0.11: `Config`
- `testing` - : The testing flag.  Set this to ``True`` to enable the test mode of
  : Flask extensions (and in the future probably also Flask itself).
  : For example this might activate test helpers that have an
  : additional runtime cost which should not be enabled by default.
  :
  : If this is enabled and PROPAGATE_EXCEPTIONS is not changed from the
  : default it's implicitly enabled.
  :
  : This attribute can also be configured from the config with the
  : ``TESTING`` configuration key.  Defaults to ``False``.: `ConfigAttribute('TESTING')`
- `secret_key` - : If a secret key is set, cryptographic components can use this to
  : sign cookies and other things. Set this to a complex random value
  : when you want to use the secure cookie for instance.
  :
  : This attribute can also be configured from the config with the
  : :data:`SECRET_KEY` configuration key. Defaults to ``None``.: `ConfigAttribute('SECRET_KEY')`
- `session_cookie_name` - : The secure cookie uses this for the name of the session cookie.
  :
  : This attribute can also be configured from the config with the
  : ``SESSION_COOKIE_NAME`` configuration key.  Defaults to ``'session'``: `ConfigAttribute('SESSION_COOKIE_NAME')`
- `permanent_session_lifetime` - : A :class:`~datetime.timedelta` which is used to set the expiration
  : date of a permanent session.  The default is 31 days which makes a
  : permanent session survive for roughly one month.
  :
  : This attribute can also be configured from the config with the
  : ``PERMANENT_SESSION_LIFETIME`` configuration key.  Defaults to
  : ``timedelta(days=31)``: `ConfigAttribute('PERMANENT_SESSION_LIFETIME', get_converter=_make_timedelta)`
- `send_file_max_age_default` - : A :class:`~datetime.timedelta` which is used as default cache_timeout
  : for the :func:`send_file` functions. The default is 12 hours.
  :
  : This attribute can also be configured from the config with the
  : ``SEND_FILE_MAX_AGE_DEFAULT`` configuration key. This configuration
  : variable can also be set with an integer value used as seconds.
  : Defaults to ``timedelta(hours=12)``: `ConfigAttribute('SEND_FILE_MAX_AGE_DEFAULT', get_converter=_make_timedelta)`
- `use_x_sendfile` - : Enable this if you want to use the X-Sendfile feature.  Keep in
  : mind that the server has to support this.  This only affects files
  : sent with the :func:`send_file` method.
  :
  : .. versionadded:: 0.2
  :
  : This attribute can also be configured from the config with the
  : ``USE_X_SENDFILE`` configuration key.  Defaults to ``False``.: `ConfigAttribute('USE_X_SENDFILE')`
- `json_encoder` - : The JSON encoder class to use.  Defaults to :class:`~flask.json.JSONEncoder`.
  :
  : .. versionadded:: 0.10: `json.JSONEncoder`
- `json_decoder` - : The JSON decoder class to use.  Defaults to :class:`~flask.json.JSONDecoder`.
  :
  : .. versionadded:: 0.10: `json.JSONDecoder`
- `jinja_options` - : Options that are passed to the Jinja environment in
  : :meth:`create_jinja_environment`. Changing these options after
  : the environment is created (accessing :attr:`jinja_env`) will
  : have no effect.
  :
  : .. versionchanged:: 1.1.0
  :     This is a ``dict`` instead of an ``ImmutableDict`` to allow
  :     easier configuration.
  :: `{'extensions': ['jinja2.ext.autoescape', 'jinja2.ext.with_']}`
- `default_config` - : Default configuration parameters.: `ImmutableDict({'ENV': None, 'DEBUG': None, 'TESTING': False, ...)`
- `url_rule_class` - : The rule object to use for URL rules created.  This is used by
  : :meth:`add_url_rule`.  Defaults to :class:`werkzeug.routing.Rule`.
  :
  : .. versionadded:: 0.7: `Rule`
- `url_map_class` - : The map object to use for storing the URL rules and routing
  : configuration parameters. Defaults to :class:`werkzeug.routing.Map`.
  :
  : .. versionadded:: 1.1.0: `Map`
- `test_client_class` - : the test client that is used with when `test_client` is used.
  :
  : .. versionadded:: 0.7: `None`
- `test_cli_runner_class` - : The :class:`~click.testing.CliRunner` subclass, by default
  : :class:`~flask.testing.FlaskCliRunner` that is used by
  : :meth:`test_cli_runner`. Its ``__init__`` method should take a
  : Flask app object as the first argument.
  :
  : .. versionadded:: 1.0: `None`
- `session_interface` - : the session interface to use.  By default an instance of
  : :class:`~flask.sessions.SecureCookieSessionInterface` is used here.
  :
  : .. versionadded:: 0.8: `SecureCookieSessionInterface()`
- `import_name` - : The name of the package or module that this app belongs to. Do not
  : change this once it is set by the constructor.: `None`
- `template_folder` - : Location of the template files to be added to the template lookup.
  : ``None`` if templates should not be added.: `None`
- `root_path` - : Absolute path to the package on the filesystem. Used to look up
  : resources contained in the package.: `None`
- `env` - : What environment the app is running in. Flask and extensions may
  : enable behaviors based on the environment, such as enabling debug
  : mode. This maps to the :data:`ENV` config key. This is set by the
  : :envvar:`FLASK_ENV` environment variable and may not behave as
  : expected if set in code.
  :
  : **Do not enable development when deploying in production.**
  :
  : Default: ``'production'``: `ConfigAttribute('ENV')`

### Flask().\_\_call\_\_

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2460)

```python
def __call__(environ, start_response):
```

The WSGI server calls the Flask application object as the
WSGI application. This calls :meth:[Flask().wsgi_app](#flaskwsgi_app) which can be
wrapped to applying middleware.

### Flask().add_template_filter

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1451)

```python
@setupmethod
def add_template_filter(f, name=None):
```

Register a custom template filter.  Works exactly like the
:meth:[Flask().template_filter](#flasktemplate_filter) decorator.

#### Arguments

- `name` - the optional name of the filter, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().add_template_global

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1522)

```python
@setupmethod
def add_template_global(f, name=None):
```

Register a custom template global function. Works exactly like the
:meth:[Flask().template_global](#flasktemplate_global) decorator.

#### Notes

Added in version 0.10

#### Arguments

- `name` - the optional name of the global function, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().add_template_test

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1488)

```python
@setupmethod
def add_template_test(f, name=None):
```

Register a custom template test.  Works exactly like the
:meth:[Flask().template_test](#flasktemplate_test) decorator.

#### Notes

Added in version 0.10

#### Arguments

- `name` - the optional name of the test, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().add_url_rule

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1177)

```python
@setupmethod
def add_url_rule(
    rule,
    endpoint=None,
    view_func=None,
    provide_automatic_options=None,
    **options,
):
```

Connects a URL rule.  Works exactly like the :meth:[Flask().route](#flaskroute)
decorator.  If a view_func is provided it will be registered with the
endpoint.

Basically this example

```python
@app.route('/')
def index():
    pass
```

Is equivalent to the following

```python
def index():
    pass
app.add_url_rule('/', 'index', index)
```

If the view_func is not provided you will need to connect the endpoint
to a view function like so

```python
app.view_functions['index'] = index
```

Internally :meth:[Flask().route](#flaskroute) invokes :meth:`add_url_rule` so if you want
to customize the behavior via subclassing you only need to change
this method.

For more information refer to :ref:`url-route-registrations`.

#### Notes

Changed in version 0.2
   `view_func` parameter added.

Changed in version 0.6
   ``OPTIONS`` is added automatically as method.

#### Arguments

- `rule` - the URL rule as string
- `endpoint` - the endpoint for the registered URL rule.  Flask
                 itself assumes the name of the view function as
                 endpoint
- `view_func` - the function to call when serving a request to the
                  provided endpoint
- `provide_automatic_options` - controls whether the ``OPTIONS``
    method should be added automatically. This can also be controlled
    by setting the ``view_func.provide_automatic_options = False``
    before adding the rule.
- `options` - the options to be forwarded to the underlying
                class `werkzeug.routing.Rule` object.  A change
                to Werkzeug is handling of method options.  methods
                is a list of methods this rule should be limited
                to (``GET``, ``POST`` etc.).  By default a rule
                just listens for ``GET`` (and implicitly ``HEAD``).
                Starting with Flask 0.6, ``OPTIONS`` is implicitly
                added and handled by the standard request handling.

#### See also

- [setupmethod](#setupmethod)

### Flask().after_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1561)

```python
@setupmethod
def after_request(f):
```

Register a function to be run after each request.

Your function must take one parameter, an instance of
:attr:[response_class](#flask) and return a new response object or the
same (see :meth:[Flask().process_response](#flaskprocess_response)).

As of Flask 0.7 this function might not be executed at the end of the
request in case an unhandled exception occurred.

#### See also

- [setupmethod](#setupmethod)

### Flask().app_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2324)

```python
def app_context():
```

Create an class `flask.ctx.AppContext`. Use as a ``with``
block to push the context, which will make `current_app`
point at this application.

An application context is automatically pushed by
:meth:`RequestContext.push() <flask.ctx.RequestContext.push>`
when handling a request, and when running a CLI command. Use
this to manually create a context outside of these situations.

```python
with app.app_context():
    init_db()
```

See :doc:`/appcontext`.

#### Notes

Added in version 0.9

### Flask().auto_find_instance_path

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L717)

```python
def auto_find_instance_path():
```

Tries to locate the instance path if it was not provided to the
constructor of the application class.  It will basically calculate
the path to a folder named ``instance`` next to your main file or
the package.

#### Notes

Added in version 0.8

### Flask().before_first_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1548)

```python
@setupmethod
def before_first_request(f):
```

Registers a function to be run before the first request to this
instance of the application.

The function will be called without any arguments and its return
value is ignored.

#### Notes

Added in version 0.8

#### See also

- [setupmethod](#setupmethod)

### Flask().before_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1534)

```python
@setupmethod
def before_request(f):
```

Registers a function to run before each request.

For example, this can be used to open a database connection, or to load
the logged in user from the session.

The function will be called without any arguments. If it returns a
non-None value, the value is handled as if it was the return value from
the view, and further request handling is stopped.

#### See also

- [setupmethod](#setupmethod)

### Flask().context_processor

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1647)

```python
@setupmethod
def context_processor(f):
```

Registers a template context processor function.

#### See also

- [setupmethod](#setupmethod)

### Flask().create_global_jinja_loader

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L796)

```python
def create_global_jinja_loader():
```

Creates the loader for the Jinja2 environment.  Can be used to
override just the loader and keeping the rest unchanged.  It's
discouraged to override this function.  Instead one should override
the :meth:`jinja_loader` function instead.

The global loader dispatches between the loaders of the application
and the individual blueprints.

#### Notes

Added in version 0.7

### Flask().create_jinja_environment

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L761)

```python
def create_jinja_environment():
```

Create the Jinja environment based on :attr:[jinja_options](#flask)
and the various Jinja-related methods of the app. Changing
:attr:[jinja_options](#flask) after this will have no effect. Also adds
Flask-related globals and filters to the environment.

#### Notes

Changed in version 0.11
   ``Environment.auto_reload`` set in accordance with
   ``TEMPLATES_AUTO_RELOAD`` configuration option.

Added in version 0.5

### Flask().create_url_adapter

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2147)

```python
def create_url_adapter(request):
```

Creates a URL adapter for the given request. The URL adapter
is created at a point where the request context is not yet set
up so the request is passed explicitly.

#### Notes

Added in version 0.6

Changed in version 0.9
   This can now also be called without a request object when the
   URL adapter is created for the application context.

Changed in version 1.0
    `SERVER_NAME` no longer implicitly enables subdomain
    matching. Use attribute `subdomain_matching` instead.

### Flask().debug

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L867)

```python
@property
def debug():
```

Whether debug mode is enabled. When using ``flask run`` to start
the development server, an interactive debugger will be shown for
unhandled exceptions, and the server will be reloaded when code
changes. This maps to the `DEBUG` config key. This is
enabled when :attr:[env](#flask) is ``'development'`` and is overridden
by the ``FLASK_DEBUG`` environment variable. It may not behave as
expected if set in code.

**Do not enable debug mode when deploying in production.**

Default: ``True`` if :attr:[env](#flask) is ``'development'``, or
``False`` otherwise.

### Flask().debug

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L884)

```python
@debug.setter
def debug(value):
```

### Flask().dispatch_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1914)

```python
def dispatch_request():
```

Does the request dispatching.  Matches the URL and returns the
return value of the view or error handler.  This does not have to
be a response object.  In order to convert the return value to a
proper response object, call :func:[Flask().make_response](#flaskmake_response).

#### Notes

Changed in version 0.7
   This no longer does the exception handling, this code was
   moved to the new :meth:[Flask().full_dispatch_request](#flaskfull_dispatch_request).

### Flask().do_teardown_appcontext

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2303)

```python
def do_teardown_appcontext(exc=_sentinel):
```

Called right before the application context is popped.

When handling a request, the application context is popped
after the request context. See :meth:[Flask().do_teardown_request](#flaskdo_teardown_request).

This calls all functions decorated with
:meth:[Flask().teardown_appcontext](#flaskteardown_appcontext). Then the
`appcontext_tearing_down` signal is sent.

This is called by
:meth:`AppContext.pop() <flask.ctx.AppContext.pop>`.

#### Notes

Added in version 0.9

### Flask().do_teardown_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2272)

```python
def do_teardown_request(exc=_sentinel):
```

Called after the request is dispatched and the response is
returned, right before the request context is popped.

This calls all functions decorated with
:meth:[Flask().teardown_request](#flaskteardown_request), and :meth:`Blueprint.teardown_request`
if a blueprint handled the request. Finally, the
`request_tearing_down` signal is sent.

This is called by
:meth:`RequestContext.pop() <flask.ctx.RequestContext.pop>`,
which may be delayed during testing to maintain access to
resources.

#### Arguments

- `exc` - An unhandled exception raised while dispatching the
    request. Detected from the current exception information if
    not passed. Passed to each teardown function.

#### Notes

Changed in version 0.9
    Added the ``exc`` argument.

### Flask().endpoint

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1320)

```python
@setupmethod
def endpoint(endpoint):
```

A decorator to register a function as an endpoint.
Example

```python
@app.endpoint('example.endpoint')
def example():
    return "example"
```

#### Arguments

- `endpoint` - the name of the endpoint

#### See also

- [setupmethod](#setupmethod)

### Flask().errorhandler

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1359)

```python
@setupmethod
def errorhandler(code_or_exception):
```

Register a function to handle errors by code or exception class.

A decorator that is used to register a function given an
error code.  Example

```python
@app.errorhandler(404)
def page_not_found(error):
    return 'This page does not exist', 404
```

You can also register handlers for arbitrary exceptions

```python
@app.errorhandler(DatabaseError)
def special_exception_handler(error):
    return 'Database connection failed', 500
```

#### Notes

Added in version 0.7
    Use :meth:[Flask().register_error_handler](#flaskregister_error_handler) instead of modifying
    attribute `error_handler_spec` directly, for application wide error
    handlers.

Added in version 0.7
   One can now additionally also register custom exception types
   that do not necessarily have to be a subclass of the
   class `werkzeug.exceptions.HTTPException` class.

#### Arguments

- `code_or_exception` - the code as integer for the handler, or
                          an arbitrary exception

#### See also

- [setupmethod](#setupmethod)

### Flask().finalize_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1955)

```python
def finalize_request(rv, from_error_handler=False):
```

Given the return value from a view function this finalizes
the request by converting it into a response and invoking the
postprocessing functions.  This is invoked for both normal
request dispatching as well as error handlers.

Because this means that it might be called as a result of a
failure a special safe mode is available which can be enabled
with the `from_error_handler` flag.  If enabled, failures in
response processing will be logged and otherwise ignored.

:internal:

### Flask().full_dispatch_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1938)

```python
def full_dispatch_request():
```

Dispatches the request and on top of that performs request
pre and postprocessing as well as HTTP exception catching and
error handling.

#### Notes

Added in version 0.7

### Flask().got_first_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L691)

```python
@property
def got_first_request():
```

This attribute is set to ``True`` if the application started
handling the first request.

#### Notes

Added in version 0.8

### Flask().handle_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1824)

```python
def handle_exception(e):
```

Handle an exception that did not have an error handler
associated with it, or that was raised from an error handler.
This always causes a 500 ``InternalServerError``.

Always sends the `got_request_exception` signal.

If :attr:[Flask().propagate_exceptions](#flaskpropagate_exceptions) is ``True``, such as in debug
mode, the error will be re-raised so that the debugger can
display it. Otherwise, the original exception is logged, and
an exception `~werkzeug.exceptions.InternalServerError` is returned.

If an error handler is registered for ``InternalServerError`` or
``500``, it will be used. For consistency, the handler will
always receive the ``InternalServerError``. The original
unhandled exception is available as ``e.original_exception``.

#### Notes

Prior to Werkzeug 1.0.0, ``InternalServerError`` will not
always have an ``original_exception`` attribute. Use
``getattr(e, "original_exception", None)`` to simulate the
behavior for compatibility.

Changed in version 1.1.0
    Always passes the ``InternalServerError`` instance to the
    handler, setting ``original_exception`` to the unhandled
    error.

Changed in version 1.1.0
    [Flask().after_request](#flaskafter_request) functions and other finalization is done
    even for the default 500 response when there is no handler.

Added in version 0.3

### Flask().handle_http_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1713)

```python
def handle_http_exception(e):
```

Handles an HTTP exception.  By default this will invoke the
registered error handlers and fall back to returning the
exception as response.

#### Notes

Changed in version 1.0.3
    ``RoutingException``, used internally for actions such as
     slash redirects during routing, is not passed to error
     handlers.

Changed in version 1.0
    Exceptions are looked up by code *and* by MRO, so
    ``HTTPExcpetion`` subclasses can be handled with a catch-all
    handler for the base ``HTTPException``.

Added in version 0.3

### Flask().handle_url_build_error

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2199)

```python
def handle_url_build_error(error, endpoint, values):
```

Handle class `werkzeug.routing.BuildError` on :meth:`url_for`.

### Flask().handle_user_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1781)

```python
def handle_user_exception(e):
```

This method is called whenever an exception occurs that
should be handled. A special case is class `werkzeug
.exceptions.HTTPException` which is forwarded to the
:meth:[Flask().handle_http_exception](#flaskhandle_http_exception) method. This function will either
return a response value or reraise the exception with the same
traceback.

#### Notes

Changed in version 1.0
    Key errors raised from request data like ``form`` show the
    bad key in debug mode rather than a generic bad request
    message.

Added in version 0.7

### Flask().inject_url_defaults

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2185)

```python
def inject_url_defaults(endpoint, values):
```

Injects the URL defaults for the given endpoint directly into
the values dictionary passed.  This is used internally and
automatically called on URL building.

#### Notes

Added in version 0.7

### Flask().iter_blueprints

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1170)

```python
def iter_blueprints():
```

Iterates over all blueprints by the order they were registered.

#### Notes

Added in version 0.11

### Flask().jinja_env

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L681)

```python
@locked_cached_property
def jinja_env():
```

The Jinja environment used to load templates.

The environment is created the first time this property is
accessed. Changing :attr:[jinja_options](#flask) after that will have no
effect.

### Flask().log_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1883)

```python
def log_exception(exc_info):
```

Logs an exception.  This is called by :meth:[Flask().handle_exception](#flaskhandle_exception)
if debugging is disabled and right before the handler is called.
The default implementation logs the exception as error on the
:attr:[Flask().logger](#flasklogger).

#### Notes

Added in version 0.8

### Flask().logger

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L654)

```python
@locked_cached_property
def logger():
```

A standard Python class `logging.Logger` for the app, with
the same name as :attr:[Flask().name](#flaskname).

In debug mode, the logger's attribute `~logging.Logger.level` will
be set to `~logging.DEBUG`.

If there are no handlers configured, a default handler will be
added. See :doc:`/logging` for more information.

#### Notes

Changed in version 1.1.0
    The logger takes the same name as :attr:[Flask().name](#flaskname) rather than
    hard-coding ``"flask.app"``.

Changed in version 1.0.0
    Behavior was simplified. The logger is always named
    ``"flask.app"``. The level is only set during configuration,
    it doesn't check ``app.debug`` each time. Only one format is
    used, not different ones depending on ``app.debug``. No
    handlers are removed, and a handler is only added if no
    handlers are already configured.

Added in version 0.3

### Flask().make_config

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L700)

```python
def make_config(instance_relative=False):
```

Used to create the config attribute by the Flask constructor.
The `instance_relative` parameter is passed in from the constructor
of Flask (there named `instance_relative_config`) and indicates if
the config should be relative to the instance path or the root path
of the application.

#### Notes

Added in version 0.8

### Flask().make_default_options_response

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1996)

```python
def make_default_options_response():
```

This method is called to create the default ``OPTIONS`` response.
This can be changed through subclassing to change the default
behavior of ``OPTIONS`` responses.

#### Notes

Added in version 0.7

### Flask().make_null_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1114)

```python
def make_null_session():
```

Creates a new instance of a missing session.  Instead of overriding
this method we recommend replacing the :class:[session_interface](#flask).

.. deprecated: 1.0
    Will be removed in 2.0. Use
    ``session_interface.make_null_session`` instead.

#### Notes

Added in version 0.7

### Flask().make_response

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2029)

```python
def make_response(rv):
```

Convert the return value from a view function to an instance of
:attr:[response_class](#flask).

#### Arguments

- `rv` - the return value from the view function. The view function
    must return a response. Returning ``None``, or the view ending
    without returning, is not allowed. The following types are allowed
    for ``view_rv``:

``str`` (``unicode`` in Python 2)
    A response object is created with the string encoded to UTF-8
    as the body.

``bytes`` (``str`` in Python 2)
    A response object is created with the bytes as the body.

``dict``
    A dictionary that will be jsonify'd before being returned.

``tuple``
    Either ``(body, status, headers)``, ``(body, status)``, or
    ``(body, headers)``, where ``body`` is any of the other types
    allowed here, ``status`` is a string or an integer, and
    ``headers`` is a dictionary or a list of ``(key, value)``
    tuples. If ``body`` is a :attr:[response_class](#flask) instance,
    ``status`` overwrites the exiting value and ``headers`` are
    extended.

:attr:[response_class](#flask)
    The object is returned unchanged.

other class `werkzeug.wrappers.Response` class
    The object is coerced to :attr:[response_class](#flask).

:func:`callable`
    The function is called as a WSGI application. The result is
    used to create a response object.

#### Notes

Changed in version 0.9
   Previously a tuple was interpreted as the arguments for the
   response object.

### Flask().make_shell_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L844)

```python
def make_shell_context():
```

Returns the shell context for an interactive shell for this
application.  This runs all the registered shell context
processors.

#### Notes

Added in version 0.11

### Flask().name

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L612)

```python
@locked_cached_property
def name():
```

The name of the application.  This is usually the import name
with the difference that it's guessed from the run file if the
import name is main.  This name is used as a display name when
Flask needs the name of the application.  It can be set and overridden
to change the value.

#### Notes

Added in version 0.8

### Flask().open_instance_resource

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L730)

```python
def open_instance_resource(resource, mode='rb'):
```

Opens a resource from the application's instance folder
(attribute `instance_path`).  Otherwise works like
:meth:`open_resource`.  Instance resources can also be opened for
writing.

#### Arguments

- `resource` - the name of the resource.  To access resources within
                 subfolders use forward slashes as separator.
- `mode` - resource file opening mode, default is 'rb'.

### Flask().open_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1070)

```python
def open_session(request):
```

Creates or opens a new session.  Default implementation stores all
session data in a signed cookie.  This requires that the
:attr:[secret_key](#flask) is set.  Instead of overriding this method
we recommend replacing the :class:[session_interface](#flask).

.. deprecated: 1.0
    Will be removed in 2.0. Use
    ``session_interface.open_session`` instead.

#### Arguments

- `request` - an instance of :attr:[request_class](#flask).

### Flask().preprocess_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2219)

```python
def preprocess_request():
```

Called before the request is dispatched. Calls
attribute `url_value_preprocessors` registered with the app and the
current blueprint (if any). Then calls attribute `before_request_funcs`
registered with the app and the blueprint.

If any :meth:[Flask().before_request](#flaskbefore_request) handler returns a non-None value, the
value is handled as if it was the return value from the view, and
further request handling is stopped.

### Flask().preserve_context_on_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L641)

```python
@property
def preserve_context_on_exception():
```

Returns the value of the ``PRESERVE_CONTEXT_ON_EXCEPTION``
configuration value in case it's set, otherwise a sensible default
is returned.

#### Notes

Added in version 0.7

### Flask().process_response

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2246)

```python
def process_response(response):
```

Can be overridden in order to modify the response object
before it's sent to the WSGI server.  By default this will
call all the :meth:[Flask().after_request](#flaskafter_request) decorated functions.

#### Notes

Changed in version 0.5
   As of Flask 0.5 the functions registered for after request
   execution are called in reverse order of registration.

#### Arguments

- `response` - a :attr:[response_class](#flask) object.

#### Returns

a new response object or the same, has to be an
         instance of :attr:[response_class](#flask).

### Flask().propagate_exceptions

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L629)

```python
@property
def propagate_exceptions():
```

Returns the value of the ``PROPAGATE_EXCEPTIONS`` configuration
value in case it's set, otherwise a sensible default is returned.

#### Notes

Added in version 0.7

### Flask().raise_routing_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1895)

```python
def raise_routing_exception(request):
```

Exceptions that are recording during routing are reraised with
this method.  During debug we are not reraising redirect requests
for non ``GET``, ``HEAD``, or ``OPTIONS`` requests and we're raising
a different error instead to help debug situations.

:internal:

### Flask().register_blueprint

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1134)

```python
@setupmethod
def register_blueprint(blueprint, **options):
```

Register a class `flask.Blueprint` on the application. Keyword
arguments passed to this method will override the defaults set on the
blueprint.

Calls the blueprint's :meth:`~flask.Blueprint.register` method after
recording the blueprint in the application's attribute `blueprints`.

#### Arguments

- `blueprint` - The blueprint to register.
- `url_prefix` - Blueprint routes will be prefixed with this.
- `subdomain` - Blueprint routes will match on this subdomain.
- `url_defaults` - Blueprint routes will use these default values for
    view arguments.
- `options` - Additional keyword arguments are passed to
    class `flask.blueprints.BlueprintSetupState`. They can be
    accessed in :meth:`~flask.Blueprint.record` callbacks.

#### Notes

Added in version 0.7

#### See also

- [setupmethod](#setupmethod)

### Flask().register_error_handler

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1396)

```python
@setupmethod
def register_error_handler(code_or_exception, f):
```

Alternative error attach function to the :meth:[Flask().errorhandler](#flaskerrorhandler)
decorator that is more straightforward to use for non decorator
usage.

#### Notes

Added in version 0.7

#### See also

- [setupmethod](#setupmethod)

### Flask().request_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2345)

```python
def request_context(environ):
```

Create a class `flask.ctx.RequestContext` representing a
WSGI environment. Use a ``with`` block to push the context,
which will make `request` point at this request.

See :doc:`/reqcontext`.

Typically you should not call this from your own code. A request
context is automatically pushed by the :meth:[Flask().wsgi_app](#flaskwsgi_app) when
handling a request. Use :meth:[Flask().test_request_context](#flasktest_request_context) to create
an environment and context instead of this method.

#### Arguments

- `environ` - a WSGI environment

### Flask().route

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1288)

```python
def route(rule, **options):
```

A decorator that is used to register a view function for a
given URL rule.  This does the same thing as :meth:[Flask().add_url_rule](#flaskadd_url_rule)
but is intended for decorator usage

```python
@app.route('/')
def index():
    return 'Hello World'
```

For more information refer to :ref:`url-route-registrations`.

#### Arguments

- `rule` - the URL rule as string
- `endpoint` - the endpoint for the registered URL rule.  Flask
                 itself assumes the name of the view function as
                 endpoint
- `options` - the options to be forwarded to the underlying
                class `werkzeug.routing.Rule` object.  A change
                to Werkzeug is handling of method options.  methods
                is a list of methods this rule should be limited
                to (``GET``, ``POST`` etc.).  By default a rule
                just listens for ``GET`` (and implicitly ``HEAD``).
                Starting with Flask 0.6, ``OPTIONS`` is implicitly
                added and handled by the standard request handling.

### Flask().run

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L889)

```python
def run(host=None, port=None, debug=None, load_dotenv=True, **options):
```

Runs the application on a local development server.

Do not use ``run()`` in a production setting. It is not intended to
meet security and performance requirements for a production server.
Instead, see :ref:`deployment` for WSGI server recommendations.

If the :attr:[Flask().debug](#flaskdebug) flag is set the server will automatically reload
for code changes and show a debugger in case an exception happened.

If you want to run the application in debug mode, but disable the
code execution on the interactive debugger, you can pass
``use_evalex=False`` as parameter.  This will keep the debugger's
traceback screen active, but disable code execution.

It is not recommended to use this function for development with
automatic reloading as this is badly supported.  Instead you should
be using the :command:`flask` command line script's ``run`` support.

Keep in Mind

Flask will suppress any server error with a generic error page
unless it is in debug mode.  As such to enable just the
interactive debugger without the code reloading, you have to
invoke :meth:`run` with ``debug=True`` and ``use_reloader=False``.
Setting ``use_debugger`` to ``True`` without being in debug mode
won't catch any exceptions because there won't be any to
catch.

#### Arguments

- `host` - the hostname to listen on. Set this to ``'0.0.0.0'`` to
    have the server available externally as well. Defaults to
    ``'127.0.0.1'`` or the host in the ``SERVER_NAME`` config variable
    if present.
- `port` - the port of the webserver. Defaults to ``5000`` or the
    port defined in the ``SERVER_NAME`` config variable if present.
- `debug` - if given, enable or disable debug mode. See
    :attr:[Flask().debug](#flaskdebug).
- `load_dotenv` - Load the nearest :file:`.env` and :file:`.flaskenv`
    files to set environment variables. Will also change the working
    directory to the directory containing the first file found.
- `options` - the options to be forwarded to the underlying Werkzeug
    server. See :func:`werkzeug.serving.run_simple` for more
    information.

#### Notes

Changed in version 1.0
    If installed, python-dotenv will be used to load environment
    variables from :file:`.env` and :file:`.flaskenv` files.

If set, the :envvar:`FLASK_ENV` and :envvar:`FLASK_DEBUG`
environment variables will override :attr:[env](#flask) and
:attr:[Flask().debug](#flaskdebug).

Threaded mode is enabled by default.

Changed in version 0.10
    The default port is now picked from the ``SERVER_NAME``
    variable.

### Flask().save_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1091)

```python
def save_session(session, response):
```

Saves the session if it needs updates.  For the default
implementation, check :meth:[Flask().open_session](#flaskopen_session).  Instead of overriding this
method we recommend replacing the :class:[session_interface](#flask).

.. deprecated: 1.0
    Will be removed in 2.0. Use
    ``session_interface.save_session`` instead.

#### Arguments

- `session` - the session to be saved (a
                class `werkzeug.contrib.securecookie.SecureCookie`
                object)
- `response` - an instance of :attr:[response_class](#flask)

### Flask().select_jinja_autoescape

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L809)

```python
def select_jinja_autoescape(filename):
```

Returns ``True`` if autoescaping should be active for the given
template name. If no template name is given, returns `True`.

#### Notes

Added in version 0.5

### Flask().shell_context_processor

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1653)

```python
@setupmethod
def shell_context_processor(f):
```

Registers a shell context processor function.

#### Notes

Added in version 0.11

#### See also

- [setupmethod](#setupmethod)

### Flask().should_ignore_error

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2019)

```python
def should_ignore_error(error):
```

This is called to figure out if an error should be ignored
or not as far as the teardown system is concerned.  If this
function returns ``True`` then the teardown handlers will not be
passed the error.

#### Notes

Added in version 0.10

### Flask().teardown_appcontext

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1614)

```python
@setupmethod
def teardown_appcontext(f):
```

Registers a function to be called when the application context
ends.  These functions are typically also called when the request
context is popped.

Example

```python
ctx = app.app_context()
ctx.push()
...
ctx.pop()
```

When ``ctx.pop()`` is executed in the above example, the teardown
functions are called just before the app context moves from the
stack of active contexts.  This becomes relevant if you are using
such constructs in tests.

Since a request context typically also manages an application
context it would also be called when you pop a request context.

When a teardown function was called because of an unhandled exception
it will be passed an error object. If an :meth:[Flask().errorhandler](#flaskerrorhandler) is
registered, it will handle the exception and the teardown will not
receive it.

The return values of teardown functions are ignored.

#### Notes

Added in version 0.9

#### See also

- [setupmethod](#setupmethod)

### Flask().teardown_request

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1575)

```python
@setupmethod
def teardown_request(f):
```

Register a function to be run at the end of each request,
regardless of whether there was an exception or not.  These functions
are executed when the request context is popped, even if not an
actual request was performed.

Example

```python
ctx = app.test_request_context()
ctx.push()
...
ctx.pop()
```

When ``ctx.pop()`` is executed in the above example, the teardown
functions are called just before the request context moves from the
stack of active contexts.  This becomes relevant if you are using
such constructs in tests.

Generally teardown functions must take every necessary step to avoid
that they will fail.  If they do execute code that might fail they
will have to surround the execution of these code by try/except
statements and log occurring errors.

When a teardown function was called because of an exception it will
be passed an error object.

The return values of teardown functions are ignored.

Debug Note

In debug mode Flask will not tear down a request on an exception
immediately.  Instead it will keep it alive so that the interactive
debugger can still access it.  This behavior can be controlled
by the ``PRESERVE_CONTEXT_ON_EXCEPTION`` configuration variable.

#### See also

- [setupmethod](#setupmethod)

### Flask().template_filter

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1431)

```python
@setupmethod
def template_filter(name=None):
```

A decorator that is used to register custom template filter.
You can specify a name for the filter, otherwise the function
name will be used. Example

```python
@app.template_filter()
def reverse(s):
    return s[::-1]
```

#### Arguments

- `name` - the optional name of the filter, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().template_global

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1500)

```python
@setupmethod
def template_global(name=None):
```

A decorator that is used to register a custom template global function.
You can specify a name for the global function, otherwise the function
name will be used. Example

```python
@app.template_global()
def double(n):
    return 2 * n
```

#### Notes

Added in version 0.10

#### Arguments

- `name` - the optional name of the global function, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().template_test

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1461)

```python
@setupmethod
def template_test(name=None):
```

A decorator that is used to register custom template test.
You can specify a name for the test, otherwise the function
name will be used. Example

```python
@app.template_test()
def is_prime(n):
    if n == 2:
        return True
    for i in range(2, int(math.ceil(math.sqrt(n))) + 1):
        if n % i == 0:
            return False
    return True
```

#### Notes

Added in version 0.10

#### Arguments

- `name` - the optional name of the test, otherwise the
             function name will be used.

#### See also

- [setupmethod](#setupmethod)

### Flask().templates_auto_reload

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L742)

```python
@property
def templates_auto_reload():
```

Reload templates when they are changed. Used by
:meth:[Flask().create_jinja_environment](#flaskcreate_jinja_environment).

This attribute can be configured with `TEMPLATES_AUTO_RELOAD`. If
not set, it will be enabled in debug mode.

#### Notes

Added in version 1.0
    This property was added but the underlying config and behavior
    already existed.

### Flask().templates_auto_reload

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L757)

```python
@templates_auto_reload.setter
def templates_auto_reload(value):
```

### Flask().test_cli_runner

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1053)

```python
def test_cli_runner(**kwargs):
```

Create a CLI runner for testing CLI commands.
See :ref:`testing-cli`.

Returns an instance of :attr:[test_cli_runner_class](#flask), by default
class `flask.testing.FlaskCliRunner`. The Flask app object is
passed as the first argument.

#### Notes

Added in version 1.0

### Flask().test_client

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L997)

```python
def test_client(use_cookies=True, **kwargs):
```

Creates a test client for this application.  For information
about unit testing head over to :ref:[testing](#flask).

Note that if you are testing for assertions or exceptions in your
application code, you must set ``app.testing = True`` in order for the
exceptions to propagate to the test client.  Otherwise, the exception
will be handled by the application (not visible to the test client) and
the only indication of an AssertionError or other exception will be a
500 status code response to the test client.  See the :attr:[testing](#flask)
attribute.  For example

```python
app.testing = True
client = app.test_client()
```

The test client can be used in a ``with`` block to defer the closing down
of the context until the end of the ``with`` block.  This is useful if
you want to access the context locals for testing

```python
with app.test_client() as c:
    rv = c.get('/?vodka=42')
    assert request.args['vodka'] == '42'
```

Additionally, you may pass optional keyword arguments that will then
be passed to the application's :attr:[test_client_class](#flask) constructor.
For example

```python
from flask.testing import FlaskClient

class CustomClient(FlaskClient):
    def __init__(self, *args, **kwargs):
        self._authentication = kwargs.pop("authentication")
        super(CustomClient,self).__init__( *args, **kwargs)

app.test_client_class = CustomClient
client = app.test_client(authentication='Basic ....')
```

See class `flask.testing.FlaskClient` for more information.

#### Notes

Changed in version 0.4
   added support for ``with`` block usage for the client.

Added in version 0.7
   The `use_cookies` parameter was added as well as the ability
   to override the client to be used by setting the
   :attr:[test_client_class](#flask) attribute.

Changed in version 0.11
   Added `**kwargs` to support passing additional keyword arguments to
   the constructor of :attr:[test_client_class](#flask).

### Flask().test_request_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2361)

```python
def test_request_context(*args, **kwargs):
```

Create a class `flask.ctx.RequestContext` for a WSGI
environment created from the given values. This is mostly useful
during testing, where you may want to run a function that uses
request data without dispatching a full request.

See :doc:`/reqcontext`.

Use a ``with`` block to push the context, which will make
`request` point at the request for the created
environment. 

```python
with test_request_context(...):
    generate_report()
```

When using the shell, it may be easier to push and pop the
context manually to avoid indentation. 

```python
ctx = app.test_request_context(...)
ctx.push()
...
ctx.pop()
```

Takes the same arguments as Werkzeug's
class `werkzeug.test.EnvironBuilder`, with some defaults from
the application. See the linked Werkzeug docs for most of the
available arguments. Flask-specific behavior is listed here.

#### Arguments

- `path` - URL path being requested.
- `base_url` - Base URL where the app is being served, which
    ``path`` is relative to. If not given, built from
    `PREFERRED_URL_SCHEME`, ``subdomain``,
    `SERVER_NAME`, and `APPLICATION_ROOT`.
- `subdomain` - Subdomain name to append to
    `SERVER_NAME`.
- `url_scheme` - Scheme to use instead of
    `PREFERRED_URL_SCHEME`.
- `data` - The request body, either as a string or a dict of
    form keys and values.
- `json` - If given, this is serialized as JSON and passed as
    ``data``. Also defaults ``content_type`` to
    ``application/json``.
- `args` - other positional arguments passed to
    class `werkzeug.test.EnvironBuilder`.
- `kwargs` - other keyword arguments passed to
    class `werkzeug.test.EnvironBuilder`.

### Flask().trap_http_exception

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1746)

```python
def trap_http_exception(e):
```

Checks if an HTTP exception should be trapped or not.  By default
this will return ``False`` for all exceptions except for a bad request
key error if ``TRAP_BAD_REQUEST_ERRORS`` is set to ``True``.  It
also returns ``True`` if ``TRAP_HTTP_EXCEPTIONS`` is set to ``True``.

This is called for all HTTP exceptions raised by a view function.
If it returns ``True`` for any exception the error handler for this
exception is not called and it shows up as regular exception in the
traceback.  This is helpful for debugging implicitly raised HTTP
exceptions.

#### Notes

Changed in version 1.0
    Bad request errors are not trapped by default in debug mode.

Added in version 0.8

### Flask().try_trigger_before_first_request_functions

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1980)

```python
def try_trigger_before_first_request_functions():
```

Called before each request and will ensure that it triggers
the attribute `before_first_request_funcs` and only exactly once per
application instance (which means process usually).

:internal:

### Flask().update_template_context

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L819)

```python
def update_template_context(context):
```

Update the template context with some commonly used variables.
This injects request, session, config and g into the template
context as well as everything template context processors want
to inject.  Note that the as of Flask 0.6, the original values
in the context will not be overridden if a context processor
decides to return a value with the same key.

#### Arguments

- `context` - the context as a dictionary that is updated in place
                to add extra variables.

### Flask().url_defaults

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1679)

```python
@setupmethod
def url_defaults(f):
```

Callback function for URL defaults for all view functions of the
application.  It's called with the endpoint and values and should
update the values passed in place.

#### See also

- [setupmethod](#setupmethod)

### Flask().url_value_preprocessor

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L1662)

```python
@setupmethod
def url_value_preprocessor(f):
```

Register a URL value preprocessor function for all view
functions in the application. These functions will be called before the
:meth:[Flask().before_request](#flaskbefore_request) functions.

The function can modify the values captured from the matched url before
they are passed to the view. For example, this can be used to pop a
common language code value and place it in ``g`` rather than pass it to
every view.

The function is passed the endpoint name and values dict. The return
value is ignored.

#### See also

- [setupmethod](#setupmethod)

### Flask().wsgi_app

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L2417)

```python
def wsgi_app(environ, start_response):
```

The actual WSGI application. This is not implemented in
:meth:`__call__` so that middlewares can be applied without
losing a reference to the app object. Instead of doing this

```python
app = MyMiddleware(app)
```

It's a better idea to do this instead

```python
app.wsgi_app = MyMiddleware(app.wsgi_app)
```

Then you still have the original application object around and
can continue to call methods on it.

#### Notes

Changed in version 0.7
    Teardown events for the request and app contexts are called
    even if an unhandled error occurs. Other events may not be
    called depending on when an error occurs during dispatch.
    See :ref:`callbacks-and-errors`.

#### Arguments

- `environ` - A WSGI environment.
- `start_response` - A callable accepting a status code,
    a list of headers, and an optional exception context to
    start the response.

## setupmethod

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\app.py#L82)

```python
def setupmethod(f):
```

Wraps a method so that it performs a check in debug mode if the
first request was already handled.
