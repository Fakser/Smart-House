# flask.sessions

> Auto-generated documentation for [env.Lib.site-packages.flask.sessions](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py) module.

Implements cookie based sessions based on itsdangerous.

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [flask](index.md#flask) / flask.sessions
    - [NullSession](#nullsession)
    - [SecureCookieSession](#securecookiesession)
        - [SecureCookieSession().get](#securecookiesessionget)
        - [SecureCookieSession().setdefault](#securecookiesessionsetdefault)
    - [SecureCookieSessionInterface](#securecookiesessioninterface)
        - [SecureCookieSessionInterface().get_signing_serializer](#securecookiesessioninterfaceget_signing_serializer)
        - [SecureCookieSessionInterface().open_session](#securecookiesessioninterfaceopen_session)
        - [SecureCookieSessionInterface().save_session](#securecookiesessioninterfacesave_session)
    - [SessionInterface](#sessioninterface)
        - [SessionInterface().get_cookie_domain](#sessioninterfaceget_cookie_domain)
        - [SessionInterface().get_cookie_httponly](#sessioninterfaceget_cookie_httponly)
        - [SessionInterface().get_cookie_path](#sessioninterfaceget_cookie_path)
        - [SessionInterface().get_cookie_samesite](#sessioninterfaceget_cookie_samesite)
        - [SessionInterface().get_cookie_secure](#sessioninterfaceget_cookie_secure)
        - [SessionInterface().get_expiration_time](#sessioninterfaceget_expiration_time)
        - [SessionInterface().is_null_session](#sessioninterfaceis_null_session)
        - [SessionInterface().make_null_session](#sessioninterfacemake_null_session)
        - [SessionInterface().open_session](#sessioninterfaceopen_session)
        - [SessionInterface().save_session](#sessioninterfacesave_session)
        - [SessionInterface().should_set_cookie](#sessioninterfaceshould_set_cookie)
    - [SessionMixin](#sessionmixin)
        - [SessionMixin().permanent](#sessionmixinpermanent)
        - [SessionMixin().permanent](#sessionmixinpermanent)

:copyright: 2010 Pallets
:license: BSD-3-Clause

## NullSession

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L95)

```python
class NullSession(SecureCookieSession):
```

Class used to generate nicer error messages if sessions are not
available.  Will still allow read-only access to the empty session
but fail on setting.

#### See also

- [SecureCookieSession](#securecookiesession)

## SecureCookieSession

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L53)

```python
class SecureCookieSession(CallbackDict, SessionMixin):
    def __init__(initial=None):
```

Base class for sessions based on signed cookies.

This session backend will set the attribute `modified` and
attribute `accessed` attributes. It cannot reliably track whether a
session is new (vs. empty), so attribute `new` remains hard coded to
``False``.

#### Attributes

- `modified` - : When data is changed, this is set to ``True``. Only the session
  : dictionary itself is tracked; if the session contains mutable
  : data (for example a nested dict) then this must be set to
  : ``True`` manually when modifying that data. The session cookie
  : will only be written to the response if this is ``True``.: `False`
- `accessed` - : When data is read or written, this is set to ``True``. Used by
  :class:`.SecureCookieSessionInterface` to add a ``Vary: Cookie``
  : header, which allows caching proxies to cache different pages for
  : different users.: `False`

#### See also

- [SessionMixin](#sessionmixin)

### SecureCookieSession().get

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L86)

```python
def get(key, default=None):
```

### SecureCookieSession().setdefault

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L90)

```python
def setdefault(key, default=None):
```

## SecureCookieSessionInterface

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L307)

```python
class SecureCookieSessionInterface(SessionInterface):
```

The default session interface that stores sessions in signed cookies
through the :mod:`itsdangerous` module.

#### Attributes

- `salt` - : the salt that should be applied on top of the secret key for the
  : signing of cookie based sessions.: `'cookie-session'`
- `digest_method` - : the hash function to use for the signature.  The default is sha1: `staticmethod(hashlib.sha1)`
- `key_derivation` - : the name of the itsdangerous supported key derivation.  The default
  : is hmac.: `'hmac'`
- `serializer` - : A python serializer for the payload.  The default is a compact
  : JSON derived serializer with support for some extra Python types
  : such as datetime objects or tuples.: `session_json_serializer`

#### See also

- [SessionInterface](#sessioninterface)

### SecureCookieSessionInterface().get_signing_serializer

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L326)

```python
def get_signing_serializer(app):
```

### SecureCookieSessionInterface().open_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L339)

```python
def open_session(app, request):
```

### SecureCookieSessionInterface().save_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L353)

```python
def save_session(app, session, response):
```

## SessionInterface

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L112)

```python
class SessionInterface(object):
```

The basic interface you have to implement in order to replace the
default session interface which uses werkzeug's securecookie
implementation.  The only methods you have to implement are
:meth:`open_session` and :meth:`save_session`, the others have
useful defaults which you don't need to change.

The session object returned by the :meth:`open_session` method has to
provide a dictionary like interface plus the properties and methods
from the :class:[SessionMixin](#sessionmixin).  We recommend just subclassing a dict
and adding that mixin

```python
class Session(dict, SessionMixin):
    pass
```

If :meth:`open_session` returns ``None`` Flask will call into
:meth:`make_null_session` to create a session that acts as replacement
if the session support cannot work because some requirement is not
fulfilled.  The default :class:[NullSession](#nullsession) class that is created
will complain that the secret key was not set.

To replace the session interface on an application all you have to do
is to assign attribute `flask.Flask.session_interface`

```python
app = Flask(__name__)
app.session_interface = MySessionInterface()
```

#### Notes

Added in version 0.8

#### Attributes

- `null_session_class` - : :meth:`make_null_session` will look here for the class that should
  : be created when a null session is requested.  Likewise the
  : :meth:`is_null_session` method will perform a typecheck against
  : this type.: `NullSession`
- `pickle_based` - : A flag that indicates if the session interface is pickle based.
  : This can be used by Flask extensions to make a decision in regards
  : to how to deal with the session object.
  :
  : .. versionadded:: 0.10: `False`

### SessionInterface().get_cookie_domain

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L176)

```python
def get_cookie_domain(app):
```

Returns the domain that should be set for the session cookie.

Uses ``SESSION_COOKIE_DOMAIN`` if it is configured, otherwise
falls back to detecting the domain based on ``SERVER_NAME``.

Once detected (or if not set at all), ``SESSION_COOKIE_DOMAIN`` is
updated to avoid re-running the logic.

### SessionInterface().get_cookie_httponly

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L242)

```python
def get_cookie_httponly(app):
```

Returns True if the session cookie should be httponly.  This
currently just returns the value of the ``SESSION_COOKIE_HTTPONLY``
config var.

### SessionInterface().get_cookie_path

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L234)

```python
def get_cookie_path(app):
```

Returns the path for which the cookie should be valid.  The
default implementation uses the value from the ``SESSION_COOKIE_PATH``
config var if it's set, and falls back to ``APPLICATION_ROOT`` or
uses ``/`` if it's ``None``.

### SessionInterface().get_cookie_samesite

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L255)

```python
def get_cookie_samesite(app):
```

Return ``'Strict'`` or ``'Lax'`` if the cookie should use the
``SameSite`` attribute. This currently just returns the value of
the `SESSION_COOKIE_SAMESITE` setting.

### SessionInterface().get_cookie_secure

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L249)

```python
def get_cookie_secure(app):
```

Returns True if the cookie should be secure.  This currently
just returns the value of the ``SESSION_COOKIE_SECURE`` setting.

### SessionInterface().get_expiration_time

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L262)

```python
def get_expiration_time(app, session):
```

A helper method that returns an expiration date for the session
or ``None`` if the session is linked to the browser session.  The
default implementation returns now + the permanent session
lifetime configured on the application.

### SessionInterface().is_null_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L167)

```python
def is_null_session(obj):
```

Checks if a given object is a null session.  Null sessions are
not asked to be saved.

This checks if the object is an instance of :attr:[null_session_class](#sessioninterface)
by default.

### SessionInterface().make_null_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L155)

```python
def make_null_session(app):
```

Creates a null session which acts as a replacement object if the
real session support could not be loaded due to a configuration
error.  This mainly aids the user experience because the job of the
null session is to still support lookup without complaining but
modifications are answered with a helpful error message of what
failed.

This creates an instance of :attr:[null_session_class](#sessioninterface) by default.

### SessionInterface().open_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L287)

```python
def open_session(app, request):
```

This method has to be implemented and must either return ``None``
in case the loading failed because of a configuration error or an
instance of a session object which implements a dictionary like
interface + the methods and attributes on :class:[SessionMixin](#sessionmixin).

### SessionInterface().save_session

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L295)

```python
def save_session(app, session, response):
```

This is called for actual sessions returned by :meth:[SessionInterface().open_session](#sessioninterfaceopen_session)
at the end of the request.  This is still called during a request
context so if you absolutely need access to the request you can do
that.

### SessionInterface().should_set_cookie

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L271)

```python
def should_set_cookie(app, session):
```

Used by session backends to determine if a ``Set-Cookie`` header
should be set for this session cookie for this response. If the session
has been modified, the cookie is set. If the session is permanent and
the ``SESSION_REFRESH_EACH_REQUEST`` config is true, the cookie is
always set.

This check is usually skipped if the session was deleted.

#### Notes

Added in version 0.11

## SessionMixin

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L25)

```python
class SessionMixin(collections_abc.MutableMapping):
```

Expands a basic dictionary with session attributes.

#### Attributes

- `new` - : Some implementations can detect whether a session is newly
  : created, but that is not guaranteed. Use with caution. The mixin
  default is hard-coded ``False``.: `False`
- `modified` - : Some implementations can detect changes to the session and set
  : this when that happens. The mixin default is hard coded to
  : ``True``.: `True`
- `accessed` - : Some implementations can detect when session data is read or
  : written and set this when that happens. The mixin default is hard
  : coded to ``True``.: `True`

### SessionMixin().permanent

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L28)

```python
@property
def permanent():
```

This reflects the ``'_permanent'`` key in the dict.

### SessionMixin().permanent

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\sessions.py#L33)

```python
@permanent.setter
def permanent(value):
```
