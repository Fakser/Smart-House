# flask.testing

> Auto-generated documentation for [env.Lib.site-packages.flask.testing](..\..\..\..\..\env\Lib\site-packages\flask\testing.py) module.

Implements test support helpers.  This module is lazily imported
and usually not used in production environments.

- [Smart-house-rest-api](..\..\..\..\README.md#description) / [Modules](..\..\..\..\MODULES.md#smart-house-rest-api-modules) / `Env` / `Lib` / `Site-packages` / [flask](index.md#flask) / flask.testing
    - [EnvironBuilder](#environbuilder)
        - [EnvironBuilder().json_dumps](#environbuilderjson_dumps)
    - [FlaskCliRunner](#flaskclirunner)
        - [FlaskCliRunner().invoke](#flaskclirunnerinvoke)
    - [FlaskClient](#flaskclient)
        - [FlaskClient().open](#flaskclientopen)
        - [FlaskClient().session_transaction](#flaskclientsession_transaction)
    - [make_test_environ_builder](#make_test_environ_builder)

:copyright: 2010 Pallets
:license: BSD-3-Clause

## EnvironBuilder

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L25)

```python
class EnvironBuilder(werkzeug.test.EnvironBuilder):
    def __init__(
        app,
        path='/',
        base_url=None,
        subdomain=None,
        url_scheme=None,
        *args,
        **kwargs,
    ):
```

An class `werkzeug.test.EnvironBuilder`, that takes defaults from the
application.

#### Arguments

- `app` - The Flask application to configure the environment from.
- `path` - URL path being requested.
- `base_url` - Base URL where the app is being served, which
    ``path`` is relative to. If not given, built from
    `PREFERRED_URL_SCHEME`, ``subdomain``,
    `SERVER_NAME`, and `APPLICATION_ROOT`.
- `subdomain` - Subdomain name to append to `SERVER_NAME`.
- `url_scheme` - Scheme to use instead of
    `PREFERRED_URL_SCHEME`.
- `json` - If given, this is serialized as JSON and passed as
    ``data``. Also defaults ``content_type`` to
    ``application/json``.
- `args` - other positional arguments passed to
    class `werkzeug.test.EnvironBuilder`.
- `kwargs` - other keyword arguments passed to
    class `werkzeug.test.EnvironBuilder`.

### EnvironBuilder().json_dumps

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L88)

```python
def json_dumps(obj, **kwargs):
```

Serialize ``obj`` to a JSON-formatted string.

The serialization will be configured according to the config associated
with this EnvironBuilder's [App](..\..\..\..\app.md#app).

## FlaskCliRunner

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L252)

```python
class FlaskCliRunner(CliRunner):
    def __init__(app, **kwargs):
```

A class `click.testing.CliRunner` for testing a Flask app's
CLI commands. Typically created using
:meth:`~flask.Flask.test_cli_runner`. See :ref:`testing-cli`.

### FlaskCliRunner().invoke

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L262)

```python
def invoke(cli=None, args=None, **kwargs):
```

Invokes a CLI command in an isolated environment. See
:meth:`CliRunner.invoke <click.testing.CliRunner.invoke>` for
full method documentation. See :ref:`testing-cli` for examples.

If the ``obj`` argument is not given, passes an instance of
class `flask.cli.ScriptInfo` that knows how to load the Flask
app being tested.

#### Arguments

- `cli` - Command object to invoke. Default is the app's
    attribute `~flask.app.Flask.cli` group.
- `args` - List of strings to invoke the command with.

#### Returns

a class `click.testing.Result` object.

## FlaskClient

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L115)

```python
class FlaskClient(Client):
    def __init__(*args, **kwargs):
```

Works like a regular Werkzeug test client but has some knowledge about
how Flask works to defer the cleanup of the request context stack to the
end of a ``with`` body when used in a ``with`` statement.  For general
information about how to use this class refer to
class `werkzeug.test.Client`.

#### Notes

Changed in version 0.12
   `app.test_client()` includes preset default environment, which can be
   set after instantiation of the `app.test_client()` object in
   `client.environ_base`.

Basic usage is outlined in the :ref:`testing` chapter.

### FlaskClient().open

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L192)

```python
def open(*args, **kwargs):
```

### FlaskClient().session_transaction

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L139)

```python
@contextmanager
def session_transaction(*args, **kwargs):
```

When used in combination with a ``with`` statement this opens a
session transaction.  This can be used to modify the session that
the test client uses.  Once the ``with`` block is left the session is
stored back.

```python
with client.session_transaction() as session:
    session['value'] = 42
```

Internally this is implemented by going through a temporary test
request context and since session handling could depend on
request variables this function accepts the same arguments as
:meth:`~flask.Flask.test_request_context` which are directly
passed through.

## make_test_environ_builder

[[find in source code]](..\..\..\..\..\env\Lib\site-packages\flask\testing.py#L98)

```python
def make_test_environ_builder(*args, **kwargs):
```

Create a class `flask.testing.EnvironBuilder`.

.. deprecated: 1.1
    Will be removed in 2.0. Construct
    ``flask.testing.EnvironBuilder`` directly instead.
